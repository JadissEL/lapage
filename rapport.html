<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Rapport PFE - RoSiStrat</title>
  <link rel="stylesheet" href="style-rapport.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script type="module">
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
    mermaid.initialize({ startOnLoad: true, theme: 'neutral', securityLevel: 'loose' });
  </script>
</head>
<body>
  <div class="container">
    <header class="cover-page">
      <div class="cover-hero">
        <div class="cover-accent accent-top"></div>
        <div class="cover-logo-area">
          <div class="logo-placeholder">üéì</div>
          <p class="logo-text">Universit√© Hassan II ‚Äì Ain Chock<br/>Facult√© des Sciences</p>
        </div>
        
        <div class="cover-content">
          <div class="cover-badge">Projet de Fin d'√âtudes</div>
          <h1 class="cover-title">RoSiStrat</h1>
          <p class="cover-subtitle">Simulateur Intelligent de Strat√©gies de Roulette</p>
          <p class="cover-description">Une plateforme compl√®te d'analyse probabiliste combinant rigueur scientifique et architecture logicielle moderne</p>
        </div>
        
        <div class="cover-meta">
          <div class="meta-item">
            <span class="meta-label">√âtudiant</span>
            <span class="meta-value">Jadiss EL ANTAKI</span>
          </div>
          <div class="meta-item">
            <span class="meta-label">Encadrant</span>
            <span class="meta-value">Khalid Moussaoui - Nordine Abghour</span>
          </div>
          <div class="meta-item">
            <span class="meta-label">Fili√®re</span>
            <span class="meta-value">Full Stack & DevOps</span>
          </div>
          <div class="meta-item">
            <span class="meta-label">Ann√©e Acad√©mique</span>
            <span class="meta-value">2024-2025</span>
          </div>
        </div>
        
        <div class="cover-footer">
          <div class="cover-accent accent-bottom"></div>
          <p class="cover-date" id="coverDate"></p>
        </div>
      </div>
    </header>

    <section class="no-print" style="margin-top:10mm;">
      <div class="meta-bar">
        <div>
          <a class="btn" id="downloadPdf">‚¨áÔ∏è T√©l√©charger PDF</a>
        </div>
        <div class="meta-bar-info">G√©n√©r√© le : <span id="generationDate"></span></div>
      </div>
    </section>

    <main>
      <section class="toc">
        <h2>Table des Mati√®res (12 chapitres)</h2>
        <ol id="tocList">
          <li><a href="#remerciements">Remerciements</a> <span class="toc-page" data-target="remerciements"></span></li>
          <li><a href="#resume">R√©sum√©</a> <span class="toc-page" data-target="resume"></span></li>
          <li><a href="#abstract">Abstract (FR)</a> <span class="toc-page" data-target="abstract"></span></li>
          <li><a href="#liste-figures">Liste des Figures & Tableaux</a> <span class="toc-page" data-target="liste-figures"></span></li>
          <li><a href="#glossaire">Glossaire</a> <span class="toc-page" data-target="glossaire"></span></li>
          <li><a href="#ch1">Chapitre 1 : Introduction G√©n√©rale</a> <span class="toc-page" data-target="ch1"></span></li>
          <li><a href="#ch2">Chapitre 2 : Contexte et Probl√©matique</a> <span class="toc-page" data-target="ch2"></span></li>
          <li><a href="#ch3">Chapitre 3 : Analyse & Sp√©cifications Fonctionnelles</a> <span class="toc-page" data-target="ch3"></span></li>
          <li><a href="#ch4">Chapitre 4 : Sp√©cifications Techniques & Exigences Non-Fonctionnelles</a> <span class="toc-page" data-target="ch4"></span></li>
          <li><a href="#ch5">Chapitre 5 : Conception & Architecture</a> <span class="toc-page" data-target="ch5"></span></li>
          <li><a href="#ch6">Chapitre 6 : Impl√©mentation</a> <span class="toc-page" data-target="ch6"></span></li>
          <li><a href="#ch7">Chapitre 7 : Tests & Validation</a> <span class="toc-page" data-target="ch7"></span></li>
          <li><a href="#ch8">Chapitre 8 : Performances & Optimisations</a> <span class="toc-page" data-target="ch8"></span></li>
          <li><a href="#ch9">Chapitre 9 : S√©curit√© & Qualit√©</a> <span class="toc-page" data-target="ch9"></span></li>
          <li><a href="#ch10">Chapitre 10 : R√©sultats & Discussion</a> <span class="toc-page" data-target="ch10"></span></li>
          <li><a href="#ch11">Chapitre 11 : Perspectives & Am√©liorations Futures</a> <span class="toc-page" data-target="ch11"></span></li>
          <li><a href="#ch12">Chapitre 12 : Conclusion G√©n√©rale</a> <span class="toc-page" data-target="ch12"></span></li>
          <li><a href="#ref">R√©f√©rences Bibliographiques</a> <span class="toc-page" data-target="ref"></span></li>
          <li><a href="#annexes">Annexes</a> <span class="toc-page" data-target="annexes"></span></li>
        </ol>
        <p style="font-size:10pt;color:#555">Pagination indicative; ajustements finaux dans la version PDF.</p>
      </section>

      <div class="page-break"></div>

      <section id="remerciements">
        <h2>Remerciements</h2>
        <p>Je tiens √† exprimer ma profonde gratitude √† mon(ou ma) encadrant(e) pour ses conseils m√©thodologiques, sa disponibilit√© constante et la confiance accord√©e tout au long de ce projet. Mes remerciements vont √©galement aux membres du jury pour leurs remarques critiques et constructives, qui ont permis d'am√©liorer la qualit√© scientifique et p√©dagogique de ce m√©moire.</p>
        <p>Je souhaite √©galement remercier la direction de la fili√®re ainsi que l‚Äôensemble du corps enseignant de la Facult√© des Sciences pour la qualit√© de l‚Äôencadrement p√©dagogique et scientifique dont j‚Äôai b√©n√©fici√© durant ma formation. Leur exigence et leur bienveillance ont constitu√© un cadre pr√©cieux pour la r√©alisation de ce Projet de Fin d‚Äô√âtudes.</p>
        <p>Je remercie enfin mes coll√®gues √©tudiants pour les √©changes techniques (optimisation des algorithmes de simulation, structuration des donn√©es) et mes proches pour leur soutien moral pendant les phases intensives de d√©veloppement. √Ä toutes celles et ceux qui, de pr√®s ou de loin, ont contribu√© √† la r√©alisation de ce travail, j‚Äôexprime ici ma reconnaissance la plus sinc√®re.</p>
      </section>

      <section id="resume" class="page-break">
        <h2>R√©sum√©</h2>
        <p>RoSiStrat est une plateforme de simulation de strat√©gies de roulette europ√©enne permettant d'√©valuer, de comparer et de comprendre la dynamique probabiliste des syst√®mes de mise sans exposition financi√®re r√©elle. Elle int√®gre six strat√©gies repr√©sentatives (Compound Martingale, Max Lose, Zapping, Safe Compound Martingale, SAM+, Standard Martingale) et fournit des m√©triques cl√©s (gain/perte cumul√©s, variance, drawdown maximum, stabilit√©). L'approche √©ducative vise √† illustrer de mani√®re empirique l'esp√©rance math√©matique n√©gative propre au jeu tout en sensibilisant √† la gestion du risque.</p>
        <ul>
          <li><strong>Validation des entr√©es</strong> : contr√¥le syst√©matique des champs saisis (capital initial, nombre de tours, param√®tres propres √† chaque strat√©gie) c√¥t√© front-end et c√¥t√© back-end pour √©viter les valeurs hors bornes ou incoh√©rentes ;</li>
          <li><strong>Sanitisation des param√®tres</strong> : filtrage et typage strict des donn√©es re√ßues par l‚ÄôAPI, afin d‚Äô√©viter l‚Äôinjection de contenu malveillant ou de valeurs pouvant conduire √† des comportements impr√©visibles du moteur de simulation ;</li>
          <li><strong>Gestion des erreurs</strong> : messages d‚Äôerreur g√©n√©riques c√¥t√© client (pour ne pas divulguer de d√©tails internes) et journalisation plus pr√©cise c√¥t√© serveur pour faciliter le diagnostic.</li>
        </ul>
      <section id="abstract" class="page-break">
        <ul>
          <li><strong>Tests unitaires</strong> : couverture des strat√©gies, du moteur de simulation et des principales fonctions utilitaires ;</li>
          <li><strong>Linting & typage</strong> : utilisation syst√©matique de TypeScript et d‚Äôoutils d‚Äôanalyse statique (lint) pour rep√©rer t√¥t les erreurs de type et les mauvaises pratiques ;</li>
          <li><strong>Documentation</strong> : description concise des interfaces publiques (strat√©gies, services de simulation, API HTTP) et des conventions de configuration.</li>
        </ul>
        <p>RoSiStrat est une application web √©ducative de simulation de strat√©gies de roulette europ√©enne, construite comme une v√©ritable plateforme front‚Äëend moderne : React 18 + TypeScript, Vite, TailwindCSS, avec une biblioth√®que de composants bas√©e sur Radix UI et shadcn/ui. L‚Äôutilisateur configure un capital initial, choisit une devise parmi neuf (USD, EUR, GBP, AED, SAR, MAD, JPY, CHF, CAD), s√©lectionne une strat√©gie et lance des campagnes de 500 spins (ou plus) afin de visualiser l‚Äô√©volution du portefeuille, les gains/pertes cumul√©s et diff√©rents indicateurs de risque.</p>
        <p>Le c≈ìur m√©tier repose sur un moteur de simulation extensible et un utilitaire de roulette typ√© qui g√©n√®rent des suites de num√©ros pseudo‚Äëal√©atoires reproductibles (seed fixe), appliquent les r√®gles de mise et produisent des r√©sultats structur√©s par tour (spin, num√©ro tir√©, mises par sous‚Äëstrat√©gie, r√©sultat net, capital cumulatif). Six strat√©gies repr√©sentatives sont impl√©ment√©es : Compound Martingale, Max Lose, Zapping, Safe Compound Martingale, SAM+ (Smart Adaptive Martingale Plus) et Standard Martingale. Chacune est mod√©lis√©e via des interfaces TypeScript d√©di√©es, avec gestion des mises simultan√©es (par exemple sur z√©ro, douzaines, couleur, pair/impair) et des param√®tres de s√©curit√© (safety ratio, seuils d‚Äôarr√™t).</p>
        <p>L‚Äôapplication int√®gre un syst√®me d‚Äôauthentification complet bas√© sur Firebase Auth et Firestore, encapsul√© dans un contexte React (`AuthContext`) et compl√©t√© par un mode d√©mo de secours lorsque l‚Äôenvironnement ne permet pas d‚Äôinitialiser Firebase. Les simulations peuvent ainsi √™tre conserv√©es localement ou synchronis√©es dans le cloud, avec des services m√©tier d√©di√©s (`SimulationService`) pour la migration local ‚Üí cloud, l‚Äôexport CSV et la r√©‚Äëutilisation des configurations. Un ensemble de r√®gles de s√©curit√© Firestore, d‚Äôindexes et de tests automatis√©s (41 tests Firebase) a √©t√© r√©dig√© et document√© dans une suite de rapports (security audit, index verification, testing completion report), garantissant la conformit√© des acc√®s (ownership‚Äëbased access control, deny‚Äëall par d√©faut, v√©rification du `userId`) et des performances des requ√™tes.</p>
        <p>Du point de vue exp√©rience utilisateur, RoSiStrat est une Progressive Web App valid√©e par 79 tests d√©di√©s, avec manifest.json complet, service worker en strat√©gie cache‚Äëfirst, support hors‚Äëligne et installation sur desktop et mobile (Chrome, Safari, Edge, Firefox). L‚Äôinterface r√©active exploite React Query pour le cache et le chargement des donn√©es (9 hooks sp√©cialis√©s, 52 tests de validation), un routage document√© et test√© (routes publiques/prot√©g√©es, param√®tres d‚ÄôURL, accessibilit√©), ainsi qu‚Äôune couche de composants UI audit√©e (plus de 60 composants pass√©s en revue, corrections recommand√©es sur ARIA, focus, tailles de cibles tactiles). Un audit PWA d√©taill√©, des guides d‚Äôinstallation et de service worker, ainsi que des check‚Äëlists de validation compl√®tent la documentation.</p>
        <p>La qualit√© logicielle s‚Äôappuie sur un √©cosyst√®me de tests riche (318 tests Vitest couvrant formulaires, Firebase, React Query, routing, PWA, utilitaires), une CI GitHub Actions pour le backend (build, smoke tests, image Docker, health checks), et une documentation tr√®s fournie (plus de 50 pages sur Firebase, la PWA, les composants, les formulaires et le routage). Le projet inclut √©galement une architecture de d√©ploiement conteneuris√©e (Dockerfiles frontend et backend, docker‚Äëcompose) et un runbook de production pour le backend (ex√©cution Node, image Docker, Cloud Run/Kubernetes envisag√©s), ce qui en fait un cas d‚Äô√©tude complet de pipeline DevOps moderne autour d‚Äôun simulateur acad√©mique de strat√©gies de roulette.</p>
          <li><strong>Tests unitaires m√©tier</strong> : v√©rification d√©taill√©e des r√®gles de chaque strat√©gie, du comportement du moteur de simulation et des fonctions de calcul d‚Äôindicateurs ;</li>
          <li><strong>Tests statistiques</strong> : contr√¥le de la qualit√© du g√©n√©rateur pseudo-al√©atoire et des distributions obtenues sur de grands √©chantillons ;</li>
          <li><strong>Tests d‚Äôint√©gration et de bout en bout</strong> : validation des flux complets ¬´ configuration ‚Üí ex√©cution ‚Üí visualisation/export ¬ª, y compris via l‚Äôinterface React.</li>
        </ul>
        <p>Les simulations r√©alis√©es confirment un r√©sultat classique : quelle que soit la strat√©gie retenue, l‚Äôesp√©rance math√©matique reste n√©gative, et le joueur finit par √™tre d√©savantag√© sur le long terme. Toutefois, la mani√®re dont cette esp√©rance n√©gative se manifeste varie fortement d‚Äôune strat√©gie √† l‚Äôautre. C‚Äôest pr√©cis√©ment cette ¬´ forme ¬ª des trajectoires de capital que RoSiStrat permet de visualiser et de comparer.</p>
        <p>Les tests statistiques portent principalement sur le PRNG et la robustesse des distributions simul√©es. Sur un √©chantillon de 100 000 tirages, la fr√©quence de chaque num√©ro de la roulette doit rester compatible avec une loi uniforme (√† l‚Äôint√©rieur d‚Äôun intervalle de confiance choisi). Des tests de type Khi-deux peuvent √™tre appliqu√©s pour v√©rifier que l‚Äô√©cart entre fr√©quences observ√©es et attendues ne d√©passe pas un certain seuil. De la m√™me mani√®re, des tests de s√©quences (runs tests) permettent de s‚Äôassurer de l‚Äôabsence de motifs d√©terministes grossiers dans la suite produite.</p>
        <p>Les strat√©gies redistribuent la variance : une Martingale concentre le risque sur des √©pisodes rares mais extr√™mement violents (ruines rapides apr√®s une s√©rie d√©favorable), tandis qu‚Äôune strat√©gie comme D‚ÄôAlembert produit une courbe de capital plus liss√©e, au prix d‚Äôune progression de mise plus mod√©r√©e. Fibonacci se situe entre les deux, avec des phases de r√©cup√©ration parfois longues et une volatilit√© globalement interm√©diaire. Dans tous les cas, la maison garde son avantage, mais la perception du risque pour le joueur change radicalement.</p>
        <p>L'analyse comparative montre que la r√©duction apparente de pertes √† court terme dans les syst√®mes progressifs (par exemple Martingale) masque une vuln√©rabilit√© s√©v√®re aux s√©ries d√©favorables longues. Les graphiques de drawdown mettent en √©vidence des chutes spectaculaires de capital apr√®s des s√©quences de pertes, ce qui rend ces strat√©gies particuli√®rement risqu√©es pour des joueurs disposant d‚Äôun capital limit√© ou d‚Äôune tol√©rance au risque faible.</p>
        <p>Les strat√©gies plus conservatrices produisent des trajectoires proches d'une marche al√©atoire mod√©r√©ment biais√©e, facilitant une estimation de la probabilit√© de ruine sous capital restreint. Les m√©triques telles que le ratio gain/variance et une adaptation simplifi√©e du ratio de Sharpe (profit moyen / √©cart-type) permettent d'approcher la notion de r√©gularit√© de performance, m√™me dans un contexte d'esp√©rance n√©gative globale. Cette perspective quantifi√©e √©claire les limites des strat√©gies de r√©cup√©ration rapide et renforce la conclusion qu'aucun artifice s√©quentiel ne modifie la structure probabiliste fondamentale.</p>
        <p>Un apport int√©ressant de RoSiStrat est de rendre ces constats visibles de mani√®re interactive. En modifiant les param√®tres (capital initial, nombre de tours, seuils d‚Äôarr√™t) et en observant imm√©diatement l‚Äôimpact sur les courbes et les indicateurs, l‚Äôutilisateur prend conscience du r√¥le d√©terminant de la variance et des s√©ries dans les r√©sultats observ√©s. Cette dimension p√©dagogique compl√®te utilement la d√©monstration th√©orique et les preuves math√©matiques pr√©sent√©es dans la litt√©rature.</p>
        <p>Sur le plan quantitatif, les campagnes de test mettent en √©vidence des comportements attendus :</p>
        <ul>
          <li><strong>Martingale</strong> : trajectoires marqu√©es par de longues p√©riodes de gains modestes, ponctu√©es de chutes brutales lorsque la capacit√© de doublement est atteinte ; volatilit√© √©lev√©e et risque de ruine significatif m√™me pour des capitaux initiaux relativement confortables ;</li>
          <li><strong>Fibonacci</strong> : croissance lente et plus progressive des mises, ce qui r√©duit la fr√©quence des ruines imm√©diates mais prolonge les p√©riodes de pertes ;</li>
          <li><strong>D'Alembert</strong> : courbe de capital plus liss√©e, avec des variations moins extr√™mes, mais une esp√©rance qui reste n√©gative et une probabilit√© de ruine non n√©gligeable sur des horizons de simulation longs.</li>
        </ul>
        <img src="images/4.png" alt="R√©sultats de simulation - Graphique de croissance du portefeuille sur 500 tours" style="max-width: 100%; height: auto; border: 1px solid #e5e7eb; border-radius: 8px; margin: 20px 0;" />
        <p>La d√©marche de validation s'articule ainsi en plusieurs couches : (1) correction fonctionnelle des r√®gles de strat√©gie, (2) robustesse probabiliste du g√©n√©rateur, (3) coh√©rence statistique des agr√©gats. Un √©cart de distribution ou un comportement anormal (par exemple une variance trop faible ou trop √©lev√©e par rapport aux attentes) d√©clenche une analyse cibl√©e. Les benchmarks de performance √©tablissent en parall√®le une base de r√©f√©rence pour d√©tecter les r√©gressions et guider les optimisations futures.</p>
        <p>La reproductibilit√© est garantie par la conservation des param√®tres de simulation (seed, nombre de tours, capital initial, strat√©gie) dans des objets de configuration exportables, facilitant la r√©plication exacte d'une exp√©rience et la comparaison inter-sessions. Cette propri√©t√© est √©galement exploit√©e dans le pipeline DevOps : certaines simulations ¬´ de r√©f√©rence ¬ª sont automatiquement rejou√©es apr√®s les changements importants pour v√©rifier la stabilit√© globale du syst√®me.</p>
            <img src="images/arch-global.png" alt="Architecture globale - Frontend, Backend, Moteur de simulation" style="max-width: 100%; height: auto; border: 1px solid #e5e7eb; border-radius: 8px; margin: 20px 0;" />
          </li>
          <li>Figure 2 ‚Äì Diagramme des cas d'utilisation
            <img src="images/use-case.png" alt="Diagramme de cas d'utilisation - Acteurs et interactions" style="max-width: 100%; height: auto; border: 1px solid #e5e7eb; border-radius: 8px; margin: 20px 0;" />
          </li>
        <p>Les premiers benchmarks r√©alis√©s sur une machine de d√©veloppement standard montrent qu‚Äôune simulation de 10 000 tours s‚Äôex√©cute en quelques secondes, ce qui est compatible avec un usage interactif. Le co√ªt principal se situe dans la boucle de simulation, o√π chaque tour implique la g√©n√©ration d‚Äôun nombre al√©atoire, l‚Äôapplication de la strat√©gie et la mise √† jour des m√©triques. Les op√©rations d‚ÄôE/S (√©criture base de donn√©es, export) sont marginales √† ces √©chelles.</p>
        <p>Pour caract√©riser plus finement les performances, diff√©rents sc√©narios ont √©t√© test√©s : variation du nombre de tours (1 000, 10 000, 100 000), comparaison de plusieurs strat√©gies sur une m√™me longueur de s√©rie, ex√©cution de simulations successives avec des param√®tres voisins. Ces tests ont permis d‚Äôidentifier les principaux leviers d‚Äôoptimisation, notamment la pr√©allocation des structures de donn√©es (tableaux d‚Äôhistorique, buffers de r√©sultats) et la r√©duction des allocations d‚Äôobjets interm√©diaires dans la boucle principale.</p>
        <h3>8.2 Optimisations futures</h3>
        <ul>
          <li><strong>Portage partiel en WebAssembly</strong> : d√©placer la partie purement algorithmique (g√©n√©ration de nombres, mise √† jour des m√©triques) dans un module WASM pour acc√©l√©rer les sc√©narios de recherche intensive ;</li>
          <li><strong>Buffers typ√©s</strong> : utiliser des <code>TypedArray</code> pour stocker les s√©quences de r√©sultats (num√©ros, gains, capital) et limiter la pression sur le ramasse-miettes JavaScript ;</li>
          <li><strong>Batching et agr√©gation</strong> : ex√©cuter plusieurs simulations en lot et fusionner leurs statistiques via des algorithmes d‚Äôagr√©gation incr√©mentale, ce qui ouvrirait la voie √† un d√©ploiement distribu√©.</li>
        </ul>
        <img src="images/perf-chart.png" alt="Performance - Graphique temps d'ex√©cution vs nombre de tours" style="max-width: 100%; height: auto; border: 1px solid #e5e7eb; border-radius: 8px; margin: 20px 0;" />
            <img src="images/6.png" alt="Comparaison des strat√©gies - Analyse multi-simulation et performances du portefeuille" style="max-width: 100%; height: auto; border: 1px solid #e5e7eb; border-radius: 8px; margin: 20px 0;" />
          </li>
          <li>Figure 6 ‚Äì Profil de risque (drawdown) Martingale vs D'Alembert
            <img src="images/7.png" alt="Analyse de risque - Performance de strat√©gie, drawdown et patterns de mise" style="max-width: 100%; height: auto; border: 1px solid #e5e7eb; border-radius: 8px; margin: 20px 0;" />
          </li>
          <li>Figure 7 ‚Äì Validation PRNG (Distribution des tirages)
            <img src="images/5.png" alt="Distribution de fr√©quence des num√©ros - Validation du g√©n√©rateur al√©atoire" style="max-width: 100%; height: auto; border: 1px solid #e5e7eb; border-radius: 8px; margin: 20px 0;" />
          </li>
          <li>Tableau 1 ‚Äì Sp√©cifications fonctionnelles principales
            <img src="images/2.png" alt="Interface de simulation - Montant d'investissement, devise et moteur de roulette r√©aliste" style="max-width: 100%; height: auto; border: 1px solid #e5e7eb; border-radius: 8px; margin: 20px 0;" />
          </li>
          <li>Tableau 2 ‚Äì Indicateurs de performance
            <img src="images/11.png" alt="M√©triques de performance - Analyse d√©taill√©e de strat√©gie, risque et patterns de mise" style="max-width: 100%; height: auto; border: 1px solid #e5e7eb; border-radius: 8px; margin: 20px 0;" />
          </li>
          <li>Tableau 3 ‚Äì R√©sum√© audit s√©curit√© Firebase
            <img src="images/firebase-sec.png" alt="Audit s√©curit√© Firebase - Conformit√© OWASP et GDPR" style="max-width: 100%; height: auto; border: 1px solid #e5e7eb; border-radius: 8px; margin: 20px 0;" />
          </li>
        </ol>
      </section>

      <section id="glossaire" class="page-break">
        <h2>Glossaire</h2>
        <p style="font-size:10pt;color:#555">Les termes renvoient aux chapitres o√π ils sont analys√©s. Les hyperliens internes pourront √™tre ajout√©s apr√®s finalisation des ancres pr√©cises.</p>
        <dl style="font-size:11pt; line-height:1.4">
          <dt><strong>Esp√©rance (E)</strong></dt>
          <dd>Valeur moyenne th√©orique d'un gain par mise. N√©gative √† la roulette europ√©enne (‚âà -2,7%).</dd>
          <dt><strong>Variance</strong></dt>
          <dd>Mesure de dispersion des r√©sultats autour de la moyenne; indique volatilit√© d'une strat√©gie.</dd>
          <dt><strong>Drawdown</strong></dt>
          <dd>Plus forte baisse relative de capital depuis un sommet local; refl√®te le risque maximal observ√©.</dd>
          <dt><strong>PRNG</strong></dt>
          <dd>G√©n√©rateur pseudo-al√©atoire de nombres (Mersenne Twister ici) produisant s√©quences simulant l'al√©a.</dd>
          <dt><strong>Martingale</strong></dt>
          <dd>Syst√®me doublant la mise apr√®s perte pour r√©cup√©rer toutes les pertes + 1 unit√© de profit.</dd>
          <dt><strong>Kelly / SAM+</strong></dt>
          <dd>Approche adaptative ajustant la mise selon probabilit√© estim√©e et capital pour optimiser croissance.</dd>
          <dt><strong>ROI</strong></dt>
          <dd>Return On Investment; ratio gain net / capital initial sur la p√©riode simul√©e.</dd>
          <dt><strong>PWA</strong></dt>
          <dd>Progressive Web App; application web installable offrant exp√©rience proche native.</dd>
          <dt><strong>Firestore</strong></dt>
          <dd>Base de donn√©es NoSQL temps r√©el utilis√©e pour persister certaines donn√©es utilisateur (auth, simulation).</dd>
          <dt><strong>CI/CD</strong></dt>
          <dd>Int√©gration Continue / D√©ploiement Continu; automatisation build, tests, d√©ploiements via pipeline.</dd>
          <dt><strong>Compliance</strong></dt>
          <dd>Adh√©rence aux standards (OWASP, GDPR, bonnes pratiques s√©curit√© et performance).</dd>
        </dl>
      </section>

      <section id="ch1" class="page-break">
        <h2>Chapitre 1 : Introduction G√©n√©rale</h2>
        <p>L'√©tude des syst√®mes de mise √† la roulette demeure un terrain privil√©gi√© pour illustrer les notions fondamentales de probabilit√©, de variance et d'esp√©rance math√©matique n√©gative. La roulette europ√©enne offre un cadre bien d√©fini : 37 cases, une probabilit√© fixe de gain/perte sur les mises simples, et un ¬´ avantage maison ¬ª constant. Dans ce contexte, de nombreuses strat√©gies historiques (Martingale, Fibonacci, Labouch√®re, D'Alembert, Paroli, etc.) ont √©t√© propos√©es par les praticiens et √©tudi√©es par les math√©maticiens.</p>
        <p>Ce m√©moire s‚Äôinscrit dans le cadre du Projet de Fin d‚Äô√âtudes en G√©nie Informatique et vise √† articuler une probl√©matique math√©matique classique avec une d√©marche d‚Äôing√©nierie logicielle moderne. RoSiStrat est ainsi √† la fois un objet d‚Äô√©tude scientifique et un support concret pour mettre en ≈ìuvre une architecture applicative compl√®te, des pratiques DevOps et des techniques de simulation √† grande √©chelle.</p>
        <p>Le projet RoSiStrat s'inscrit dans cette lign√©e en proposant une plateforme de simulation qui ne cherche pas √† ¬´ battre ¬ª le jeu, mais √† quantifier avec rigueur le comportement r√©el de ces strat√©gies, dans un cadre exp√©rimental contr√¥l√©. L'objectif est de donner aux √©tudiants et aux ing√©nieurs un environnement complet pour observer, mesurer et comparer la dynamique des syst√®mes de mise, plut√¥t que de se limiter √† des raisonnements th√©oriques ou √† des exemples manuels de petite taille.</p>
        <p>Dans le m√™me temps, RoSiStrat est un projet pleinement ancr√© dans les pr√©occupations actuelles du d√©veloppement logiciel : il combine un front-end moderne (React + TypeScript), un back-end Node.js/Express, une base de donn√©es, une couche de simulation algorithmique, et un pipeline DevOps permettant de tester, construire et d√©ployer la solution de mani√®re r√©p√©table. Le rapport pr√©sent√© ici adopte donc une double focale : d'une part l'analyse probabiliste et statistique des strat√©gies de jeu, d'autre part la description de l'architecture full stack et des choix DevOps qui rendent possible cette √©tude.</p>
        <p>Les objectifs principaux du projet peuvent √™tre r√©sum√©s comme suit :</p>
        <ul>
          <li>mettre en place un moteur de simulation fiable, extensible, capable de reproduire de fa√ßon r√©aliste plusieurs strat√©gies de mise sur un grand nombre de tours ;</li>
          <li>fournir une interface web ergonomique permettant de param√©trer les exp√©riences (capital initial, nombre de tours, strat√©gie choisie, seed al√©atoire) et d‚Äôobserver les r√©sultats sous forme de tableaux et de graphiques ;</li>
          <li>structurer un pipeline de d√©veloppement et de d√©ploiement (CI/CD) qui garantit la qualit√© du code, la reproductibilit√© des simulations et la g√©n√©ration automatis√©e d‚Äôartefacts (par exemple le rapport en PDF) ;</li>
          <li>proposer une base documentaire claire qui relie les concepts math√©matiques (esp√©rance, variance, probabilit√© de ruine) aux d√©cisions techniques (choix d‚Äôarchitecture, de technologies, de strat√©gies de test et de monitoring).</li>
        </ul>
        <p>Au-del√† de la simple comparaison empirique, le projet se veut √©galement un support p√©dagogique pour des modules d‚Äôenseignement li√©s √† la data science, au DevOps et au d√©veloppement full stack. L‚Äôapplication web doit ainsi rester suffisamment simple pour √™tre comprise par un √©tudiant de fin de cycle, tout en √©tant assez structur√©e pour servir de cas d‚Äô√©tude sur la modularit√©, la maintenabilit√© et l‚Äôint√©gration continue.</p>
        <p>La force du projet r√©side dans l‚Äôint√©gration coh√©rente de ces diff√©rentes dimensions : une mod√©lisation probabiliste transparente, un moteur extensible de simulation, une interface utilisateur claire et un outillage DevOps capable de faire vivre le projet dans la dur√©e. RoSiStrat se pr√©sente ainsi comme un laboratoire num√©rique dans lequel il est possible de tester des hypoth√®ses, d‚Äôit√©rer sur le code et de suivre l‚Äôimpact des modifications √† travers un pipeline automatis√©.</p>
        <p>Les sections suivantes pr√©ciseront le contexte scientifique et technique dans lequel s‚Äôinscrit RoSiStrat, avant de d√©tailler l‚Äôanalyse des besoins, les choix d‚Äôarchitecture, la mise en ≈ìuvre et la validation exp√©rimentale du simulateur. Elles visent √† offrir une vision coh√©rente de l‚Äôensemble du cycle de vie du projet, depuis la d√©finition de la probl√©matique jusqu‚Äô√† la discussion des r√©sultats et des perspectives futures.</p>
        <img src="images/intro-schema.png" alt="Sch√©ma d'introduction - Flux strat√©gies, moteur et calculs" style="max-width: 100%; height: auto; border: 1px solid #e5e7eb; border-radius: 8px; margin: 20px 0;" />
      </section>

      <section id="ch2" class="page-break">
        <h2>Chapitre 2 : Contexte et Probl√©matique</h2>
        <h3>1.1 Historique synth√©tique</h3>
        <p>La roulette europ√©enne (37 cases) √©tablit un cadre probabiliste stable depuis le XIXe si√®cle. Les syst√®mes de mise (Martingale, Fibonacci, Labouch√®re, D'Alembert, Paroli) se sont multipli√©s avec l‚Äôambition de ¬´ dompter ¬ª la variance plut√¥t que de modifier l‚Äôesp√©rance. Historiquement, ces syst√®mes sont souvent n√©s dans la pratique des jeux d‚Äôargent avant d‚Äô√™tre analys√©s a posteriori par la th√©orie des probabilit√©s et les math√©matiques financi√®res.</p>
        <img src="images/history.png" alt="Timeline historique - √âvolution des strat√©gies de roulette 1796-2024" style="max-width: 100%; height: auto; border: 1px solid #e5e7eb; border-radius: 8px; margin: 20px 0;" />
        <h3>1.2 Avantage maison</h3>
        <p>Esp√©rance n√©gative type pour une mise simple : E = (18/37 * +1) + (19/37 * -1) ‚âà -0.027. Cette valeur symbolise l‚Äôavantage structurel du casino, ind√©pendant de la s√©quence des mises. Toute strat√©gie ne peut que modifier la distribution des s√©quences de gains/pertes (fr√©quence des petites pertes, profondeur des pertes extr√™mes, dur√©e avant ruine, etc.) sans inverser cette esp√©rance n√©gative.</p>
        <h3>1.3 Probl√©matique</h3>
        <p>Dans la pratique, de nombreux joueurs continuent pourtant √† croire en la possibilit√© d‚Äôune ¬´ martingale gagnante ¬ª, souvent sur la base de raisonnements intuitifs (loi des s√©ries, retour √† la moyenne, etc.) ou d‚Äôanecdotes. La litt√©rature scientifique souligne au contraire la stabilit√© de l‚Äôavantage maison et met en √©vidence que ces syst√®mes de mise ne sont que des transformations s√©quentielles de montants (progressions positives ou n√©gatives) sans impact sur la structure fondamentale des probabilit√©s.</p>
        <p>La valeur ajout√©e d'un simulateur acad√©mique comme RoSiStrat n'est donc pas de proposer une nouvelle m√©thode miracle, mais de qualifier rigoureusement :</p>
        <ul>
          <li>la volatilit√© de chaque strat√©gie (amplitude des fluctuations de capital) ;</li>
          <li>la profondeur et la fr√©quence des drawdowns (baisse maximale depuis un sommet) ;</li>
          <li>la probabilit√© de ruine pour un capital donn√© et un horizon de temps fix√© ;</li>
          <li>la forme g√©n√©rale des trajectoires de capital (pics rapides suivis de chutes brutales, marche plus liss√©e, etc.).</li>
        </ul>
        <p>√Ä cette probl√©matique probabiliste s‚Äôajoute un enjeu technologique : comment offrir un cadre exp√©rimental modulaire, performant et p√©dagogiquement clair pour comparer objectivement plusieurs strat√©gies dans un environnement contr√¥l√©, tout en respectant les bonnes pratiques de d√©veloppement full stack et de DevOps ? Il s‚Äôagit d‚Äôun projet o√π l‚Äôarchitecture applicative, les choix d‚Äôoutillage (frameworks, base de donn√©es, pipeline CI/CD) et la qualit√© du code sont aussi importants que les mod√®les math√©matiques sous-jacents.</p>
        <p>RoSiStrat r√©pond √† cette double probl√©matique en proposant d‚Äôun c√¥t√© un moteur de simulation extensible, capable d‚Äôint√©grer de nouvelles strat√©gies sans refonte majeure, et de l‚Äôautre une application web structur√©e permettant de visualiser les r√©sultats, d‚Äôexporter les donn√©es, et de d√©ployer facilement le syst√®me dans diff√©rents environnements (d√©veloppement, int√©gration, production). La transparence m√©thodologique est assur√©e par la d√©finition de m√©triques standardis√©es et reproductibles, ainsi que par une cha√Æne DevOps qui facilite la r√©p√©tition des exp√©riences et le suivi des √©volutions du code dans le temps.</p>
      </section>

      <section id="ch3" class="page-break">
        <h2>Chapitre 3 : Analyse & Sp√©cifications Fonctionnelles</h2>
        <h3>2.1 Analyse des besoins</h3>
        <p>L‚Äôanalyse des besoins s‚Äôest appuy√©e sur trois sources principales : (1) les exigences acad√©miques du PFE (d√©montrer une approche rigoureuse, reproductible et document√©e), (2) les attentes d‚Äôun utilisateur ¬´ √©tudiant/ing√©nieur ¬ª souhaitant explorer les strat√©gies de mise sans expertise en programmation, (3) les contraintes techniques li√©es √† l‚Äôenvironnement cible (application web accessible, ex√©cution c√¥t√© client/serveur, int√©gration avec un pipeline DevOps). √Ä partir de ces √©l√©ments, nous avons d√©gag√© un ensemble de cas d‚Äôutilisation structurants.</p>
        <p>Le diagramme de cas d‚Äôutilisation (Figure 2) met en √©vidence les acteurs principaux :</p>
        <ul>
          <li><strong>Utilisateur standard</strong> : configure une simulation (capital, strat√©gie, nombre de tours, seed), lance l‚Äôex√©cution, consulte les r√©sultats sous forme de tableaux et de graphiques, exporte √©ventuellement les donn√©es ;</li>
          <li><strong>Utilisateur avanc√©</strong> : ajoute ou active des strat√©gies personnalis√©es, modifie certains param√®tres avanc√©s (par exemple les seuils de stop-loss/stop-gain), compare plusieurs campagnes entre elles ;</li>
          <li><strong>Administrateur/D√©veloppeur</strong> : supervise le d√©ploiement, ex√©cute les tests, surveille les performances via les m√©triques expos√©es et g√®re l‚Äô√©volution du projet dans le temps.</li>
        </ul>

        <h3>2.2 Sp√©cifications fonctionnelles principales</h3>
        <ul>
          <li><strong>Configuration des simulations</strong> : l‚Äôutilisateur doit pouvoir d√©finir le capital initial, le nombre de tours, la strat√©gie choisie et, de mani√®re optionnelle, une graine pseudo-al√©atoire pour assurer la reproductibilit√© ;</li>
          <li><strong>Ex√©cution d‚Äôune simulation</strong> : le syst√®me ex√©cute la strat√©gie tour par tour, en appliquant la logique de mise d√©finie et en enregistrant les informations pertinentes (mise, num√©ro sorti, gain/perte, capital courant) ;</li>
          <li><strong>Comparaison multi-strat√©gies</strong> : l‚Äôinterface doit permettre d‚Äôex√©cuter plusieurs simulations avec des strat√©gies diff√©rentes (ou un m√™me sc√©nario r√©p√©t√©) et d‚Äôafficher les r√©sultats c√¥te √† c√¥te ;</li>
          <li><strong>Visualisation des r√©sultats</strong> : synth√®se des s√©ries temporelles (capital en fonction du nombre de tours), indicateurs agr√©g√©s (gain total, variance, drawdown maximal, probabilit√© de ruine observ√©e), graphiques comparatifs ;</li>
          <li><strong>Export des donn√©es</strong> : possibilit√© d‚Äôexporter les r√©sultats au format CSV/JSON pour exploitation dans des outils externes (Python, R, tableurs) ;</li>
          <li><strong>Gestion des strat√©gies</strong> : inclusion de strat√©gies pr√©d√©finies (Martingale, Fibonacci, D‚ÄôAlembert, etc.) et m√©canisme d‚Äôextension permettant d‚Äôenregistrer de nouvelles strat√©gies via une interface standard.</li>
        </ul>

        <h3>2.3 Exigences non-fonctionnelles</h3>
        <ul>
          <li><strong>Performance</strong> : une simulation de 10 000 tours doit rester acceptable en temps de r√©ponse sur une machine standard (ordre de quelques secondes au maximum) ;</li>
          <li><strong>Extensibilit√©</strong> : l‚Äôajout d‚Äôune nouvelle strat√©gie ne doit pas n√©cessiter de r√©√©crire le moteur de simulation ni l‚Äôinterface de base ;</li>
          <li><strong>Reproductibilit√©</strong> : l‚Äôutilisation d‚Äôune graine PRNG explicite et l‚Äôexport des param√®tres de simulation doivent permettre de rejouer exactement un sc√©nario ;</li>
          <li><strong>Observabilit√©</strong> : le syst√®me doit exposer des informations minimales sur les temps de calcul et les ressources consomm√©es, afin d‚Äôorienter d‚Äô√©ventuelles optimisations ;</li>
          <li><strong>Robustesse</strong> : les erreurs de configuration (valeurs hors bornes, combinaisons incoh√©rentes) doivent √™tre d√©tect√©es et signal√©es √† l‚Äôutilisateur sans compromettre la stabilit√© globale de l‚Äôapplication.</li>
        </ul>

        <div class="mermaid">
graph TD
    User((Utilisateur))
    Admin((Admin/Dev))
    
    subgraph "RoSiStrat App"
        Config[Configurer Simulation]
        Run[Lancer Simulation]
        View[Visualiser R√©sultats]
        Export[Exporter Donn√©es]
        Compare[Comparer Strat√©gies]
        Manage[G√©rer Strat√©gies]
    end
    
    User --> Config
    User --> Run
    User --> View
    User --> Export
    User --> Compare
    
    Admin --> Manage
    Admin --> View
    Run --> View
        </div>
        <p>Les exigences fonctionnelles ont √©t√© prioris√©es selon trois axes : int√©grit√© (exactitude des calculs), clart√© (lisibilit√© des indicateurs) et extensibilit√© (facilit√© d'int√©gration de nouvelles strat√©gies). Un mod√®le de configuration s√©rialisable (JSON) permet la r√©-ex√©cution automatis√©e de sc√©narios, condition essentielle √† la reproductibilit√© scientifique. L'export des r√©sultats ouvre la voie √† des analyses statistiques externes (r√©gressions, clustering de profils de risque).</p>
        <p>L'aspect non-fonctionnel inclut une contrainte de stabilit√© temporelle : √©viter la d√©gradation exponentielle des temps de simulation lorsque le nombre de tours augmente. L'utilisation de structures l√©g√®res et de calculs incr√©mentaux (moyenne, variance, drawdown en ligne) garantit une complexit√© lin√©aire ma√Ætris√©e. Ces choix convergent vers un syst√®me √† la fois p√©dagogique et techniquement cr√©dible, apte √† servir de support √† d‚Äôautres travaux (ajout de modules analytiques, extension du back-end, int√©gration dans un environnement DevOps complet).</p>
      </section>

      <section id="ch4" class="page-break">
        <h2>Chapitre 4 : Sp√©cifications Techniques & Exigences Non-Fonctionnelles</h2>
        <h3>4.1 Stack Technologique D√©taill√©e</h3>
        <p>Le choix des technologies pour RoSiStrat a √©t√© guid√© par la n√©cessit√© de concilier performance, maintenabilit√© et exp√©rience d√©veloppeur moderne. L'architecture repose sur une s√©paration stricte entre le client (SPA) et les services backend (BaaS).</p>
        
        <h4>4.1.1 Front-end : L'√âcosyst√®me React</h4>
        <p>L'application est d√©velopp√©e avec <strong>React 18.3.1</strong>, tirant parti des derni√®res avanc√©es comme le <em>Concurrent Mode</em> et les <em>Automatic Batching</em> pour une fluidit√© optimale lors des simulations intensives. Le langage de choix est <strong>TypeScript 5.5</strong>, garantissant une robustesse du code gr√¢ce au typage statique strict, essentiel pour la manipulation des structures de donn√©es financi√®res et statistiques.</p>
        <ul>
          <li><strong>Build Tool : Vite 7.2.2</strong>. Choisi pour sa rapidit√© de compilation (HMR instantan√©) et sa configuration optimis√©e pour les modules ES modernes. Contrairement √† Webpack, Vite offre un d√©marrage de serveur de d√©veloppement quasi-imm√©diat, ce qui acc√©l√®re consid√©rablement la boucle de feedback.</li>
          <li><strong>Styling : TailwindCSS 3.4</strong>. Une approche "utility-first" qui permet un d√©veloppement rapide d'interfaces responsives sans quitter le HTML. Coupl√© au plugin <code>tailwindcss-animate</code>, il g√®re les micro-interactions fluides.</li>
          <li><strong>Composants UI : Radix UI & shadcn/ui</strong>. Nous utilisons des primitives non styl√©es (Radix) pour l'accessibilit√© (gestion du focus, navigation au clavier WAI-ARIA) habill√©es par shadcn/ui pour une esth√©tique professionnelle et coh√©rente.</li>
          <li><strong>Ic√¥nes : Lucide React</strong>. Une biblioth√®que d'ic√¥nes l√©g√®re et tree-shakable pour l'interface utilisateur.</li>
        </ul>

        <h4>4.1.2 Gestion d'√âtat et Donn√©es</h4>
        <p>La gestion de l'√©tat est divis√©e en deux cat√©gories distinctes pour √©viter la complexit√© des stores globaux monolithiques :</p>
        <ul>
          <li><strong>√âtat Serveur : TanStack React Query v5</strong>. Utilis√© pour toutes les donn√©es asynchrones (profils utilisateurs, historiques de simulation, configurations cloud). Il g√®re nativement le cache, la d√©duplication des requ√™tes, les retries automatiques et l'invalidation intelligente (voir Chapitre 6 pour l'impl√©mentation d√©taill√©e).</li>
          <li><strong>√âtat UI & Auth : React Context API</strong>. Utilis√© pour les √©tats globaux synchrones comme la session utilisateur (<code>AuthContext</code>) ou le th√®me de l'application, √©vitant ainsi l'overhead d'une librairie comme Redux pour des cas simples.</li>
        </ul>

        <h4>4.1.3 Backend & Infrastructure (Firebase)</h4>
        <p>L'architecture "Serverless" repose enti√®rement sur la suite <strong>Firebase 11.9.1</strong>, offrant une scalabilit√© automatique et une maintenance r√©duite :</p>
        <ul>
          <li><strong>Authentication</strong> : Gestion s√©curis√©e des identit√©s (Email/Password, Google Auth) avec persistance de session.</li>
          <li><strong>Firestore</strong> : Base de donn√©es NoSQL temps r√©el pour stocker les configurations de simulation et les r√©sultats. Sa structure flexible s'adapte parfaitement aux objets JSON complexes des strat√©gies.</li>
          <li><strong>Analytics</strong> : Suivi des usages pour comprendre les parcours utilisateurs (sans tra√ßage intrusif).</li>
        </ul>

        <h4>4.1.4 Qualit√© & Tests</h4>
        <p>La strat√©gie de test est pyramidale, assur√©e par <strong>Vitest 3.1.4</strong> :</p>
        <ul>
          <li><strong>Tests Unitaires</strong> : Validation pure des algorithmes de strat√©gie (fichiers <code>.test.ts</code>).</li>
          <li><strong>Tests de Composants</strong> : <strong>React Testing Library</strong> pour v√©rifier le rendu et les interactions utilisateur (accessibilit√©, formulaires).</li>
          <li><strong>Couverture</strong> : L'environnement <code>jsdom</code> simule le navigateur pour les tests sans interface graphique lourde.</li>
        </ul>

        <h3>4.2 Performance & Scalabilit√©</h3>
        <p>Du point de vue technique, deux aspects sont distingu√©s :</p>
        <ul>
          <li><strong>Performance c√¥t√© simulation</strong> : la boucle principale (g√©n√©ration du num√©ro, calcul du gain/perte, mise √† jour des m√©triques) doit √™tre optimis√©e pour rester lin√©aire en fonction du nombre de tours. Des heuristiques simples, comme la r√©utilisation d‚Äôobjets et la pr√©allocation de tableaux, suffisent √† atteindre des temps de calcul acceptables pour 10 000 voire 100 000 tours ;</li>
          <li><strong>Performance c√¥t√© interface</strong> : l‚Äôaffichage des r√©sultats doit rester fluide, m√™me lorsque le nombre de points de donn√©es augmente. Des techniques de simplification ou d‚Äôagr√©gation de courbes (par exemple l‚Äô√©chantillonnage) peuvent √™tre utilis√©es pour √©viter de surcharger le navigateur.</li>
        </ul>
        <p>La scalabilit√© horizontale (support de nombreux utilisateurs simultan√©s, ex√©cution de simulations en parall√®le) n‚Äôest pas au c≈ìur de ce PFE, mais les choix r√©alis√©s (Node.js stateless, s√©paration nette front/back, absence d‚Äô√©tat global partag√©) pr√©parent le terrain pour un d√©ploiement plus ambitieux (containers, orchestrateurs, etc.).</p>

        <h3>4.3 Extensibilit√© & Modularit√©</h3>
        <p>L‚Äôarchitecture logique est pens√©e pour faciliter l‚Äôajout de nouvelles strat√©gies et de nouveaux types d‚Äôanalyses. Le moteur de simulation n‚Äôa connaissance que d‚Äôune interface abstraite de strat√©gie (m√©thodes pour initialiser la strat√©gie et pour calculer la mise suivante √† partir de l‚Äô√©tat courant). Chaque strat√©gie concr√®te impl√©mente cette interface et peut donc √™tre branch√©e sans modification du c≈ìur.</p>
        <p>De la m√™me fa√ßon, la couche de persistance (base de donn√©es) est isol√©e derri√®re des adaptateurs ; il devient alors possible de substituer SQLite par un autre syst√®me (par exemple une base NoSQL) sans revoir la logique m√©tier. Cette modularit√© est essentielle pour que le projet puisse √©voluer au-del√† du cadre du PFE.</p>

        <h3>4.4 Observabilit√© & Qualit√© de service</h3>
        <p>Pour soutenir le volet DevOps du projet, l‚Äôapplication expose ou enregistre un certain nombre de m√©triques techniques : temps moyen d‚Äôex√©cution d‚Äôune simulation, consommation m√©moire approximative, taille des r√©sultats export√©s, etc. Ces mesures peuvent √™tre analys√©es √† travers le pipeline CI/CD pour d√©tecter d‚Äô√©ventuelles r√©gressions de performance.</p>
        <p>Des journaux (logs) structur√©s sont g√©n√©r√©s c√¥t√© serveur pour suivre les √©v√©nements importants (d√©but/fin de simulation, erreurs, param√®tres anormaux). L‚Äôinstrumentation reste volontairement l√©g√®re, mais elle fournit une base suffisante pour int√©grer ult√©rieurement des solutions de monitoring plus avanc√©es.</p>

        <img src="images/3.png" alt="Contr√¥le de simulation - Bouton de lancement et informations l√©gales" style="max-width: 100%; height: auto; border: 1px solid #e5e7eb; border-radius: 8px; margin: 20px 0;" />
        <p>L'environnement technique s'appuie sur un g√©n√©rateur pseudo-al√©atoire testable et une instrumentation l√©g√®re (hooks de mesure de temps et compteurs m√©moire). La scalabilit√© horizontale, bien que hors p√©rim√®tre imm√©diat, est anticip√©e via une d√©coupe claire des responsabilit√©s et une absence de d√©pendance √† √©tat global mutable. Les exigences de robustesse comprennent la r√©silience aux entr√©es malform√©es et la protection contre des boucles potentiellement infinies (strat√©gies mal cod√©es). Des garde-fous (limites de mise, nombre maximal de doublings) sont int√©grables dans la configuration pour pr√©server la stabilit√© du moteur.</p>
      </section>

      <section id="ch5" class="page-break">
        <h2>Chapitre 5 : Conception & Architecture</h2>
        <h3>5.1 Architecture Applicative "Feature-First"</h3>
        <p>Contrairement √† une organisation classique par type de fichier (controllers, views, models), RoSiStrat adopte une architecture <strong>"Feature-First"</strong> (ou "Domain-Driven"). Cette structure regroupe le code par fonctionnalit√© m√©tier, ce qui am√©liore la maintenabilit√© et la scalabilit√© du projet.</p>
        <p>L'arborescence du projet refl√®te cette d√©cision :</p>
        <pre class="code">src/
‚îú‚îÄ‚îÄ features/
‚îÇ   ‚îú‚îÄ‚îÄ simulation/       # Domaine Simulation
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/   # UI sp√©cifique (SimulationForm, Chart)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hooks/        # Logique (useRunSimulation)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/     # Moteur (SimulationEngine)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ types.ts      # D√©finitions TypeScript
‚îÇ   ‚îú‚îÄ‚îÄ auth/             # Domaine Authentification
‚îÇ   ‚îî‚îÄ‚îÄ strategy/         # Domaine Strat√©gies
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îî‚îÄ‚îÄ ui/               # Biblioth√®que de composants g√©n√©riques (Boutons, Inputs)
‚îú‚îÄ‚îÄ lib/                  # Utilitaires partag√©s (Firebase, cn, formatters)
‚îî‚îÄ‚îÄ pages/                # Routes de l'application (composition des features)</pre>
        <p>Cette organisation permet d'isoler les contextes. Par exemple, le moteur de simulation est totalement d√©coupl√© de l'interface utilisateur, ce qui a facilit√© l'√©criture des tests unitaires sans avoir √† mocker le DOM.</p>

        <h3>5.2 Mod√®le de Donn√©es (NoSQL Firestore)</h3>
        <p>Le choix de Firestore (base de donn√©es orient√©e documents) s'est impos√© pour sa flexibilit√© face √† la structure polymorphique des strat√©gies. Le sch√©ma de donn√©es est con√ßu pour optimiser les lectures fr√©quentes (les historiques) tout en s√©curisant les √©critures.</p>
        
        <h4>Collection <code>users</code></h4>
        <p>Stocke les pr√©f√©rences utilisateur et les m√©tadonn√©es de compte.</p>
        <pre class="code">{
  "uid": "user_123",
  "email": "etudiant@univ.ma",
  "preferences": {
    "theme": "dark",
    "defaultCurrency": "EUR"
  },
  "createdAt": Timestamp
}</pre>

        <h4>Collection <code>simulations</code></h4>
        <p>C'est la collection centrale. Chaque document repr√©sente une ex√©cution compl√®te. Pour √©viter de d√©passer la limite de taille de document Firestore (1 Mo), l'historique d√©taill√© tour par tour est stock√© de mani√®re optimis√©e ou tronqu√©e si n√©cessaire pour l'affichage, tandis que les agr√©gats statistiques sont pr√©-calcul√©s.</p>
        <pre class="code">{
  "id": "sim_987",
  "userId": "user_123",
  "config": {
    "initialCapital": 1000,
    "rounds": 500,
    "strategyName": "SafeCompoundMartingale",
    "params": { "safetyRatio": 0.2 }
  },
  "stats": {
    "finalBalance": 1250,
    "roi": 0.25,
    "maxDrawdown": -150,
    "winRate": 0.48
  },
  "timestamp": Timestamp
}</pre>

        <h3>5.3 Design System et Composants</h3>
        <p>L'interface utilisateur repose sur une architecture de composants atomique, impl√©ment√©e via <strong>shadcn/ui</strong>. Cette approche favorise la r√©utilisation et la coh√©rence visuelle.</p>
        <ul>
          <li><strong>Atomes</strong> : Boutons, Inputs, Labels (composants <code>ui/</code>).</li>
          <li><strong>Mol√©cules</strong> : Champs de formulaire avec validation (<code>FormField</code>), Cartes de statistiques (<code>StatCard</code>).</li>
          <li><strong>Organismes</strong> : Formulaire de configuration complet, Graphique d'√©volution du capital.</li>
          <li><strong>Templates</strong> : Layouts de page (DashboardLayout, AuthLayout).</li>
        </ul>
        <p>L'utilisation de <strong>TailwindCSS</strong> permet de styliser ces composants directement dans le JSX, r√©duisant le "Context Switching" entre fichiers CSS et JS. Le th√®me est centralis√© dans le fichier <code>tailwind.config.ts</code>, permettant de changer l'identit√© visuelle de l'application (couleurs, typographie, arrondis) en modifiant quelques variables.</p>

        <img src="images/arch-layers.png" alt="Architecture en couches - UI, Application, Domain, Infrastructure, PRNG" style="max-width: 100%; height: auto; border: 1px solid #e5e7eb; border-radius: 8px; margin: 20px 0;" />
        <p>La s√©paration hexagonale garantit que le c≈ìur m√©tier (calcul des mises, mise √† jour des m√©triques) demeure ind√©pendant des d√©tails de persistance ou de pr√©sentation. Les ports d√©finissent les op√©rations abstraites (ex√©cuter une simulation, r√©cup√©rer des statistiques) et les adaptateurs concr√©tisent ces ports (impl√©mentation du PRNG, √©criture base de donn√©es, exposition HTTP, rendu React). Cette approche am√©liore la testabilit√© : il est possible de remplacer un adaptateur par un double (mock) dans les tests sans toucher au domaine.</p>
      </section>

      <section id="ch6" class="page-break">
        <h2>Chapitre 6 : Impl√©mentation</h2>
        <h3>6.1 Le Moteur de Simulation</h3>
        <p>Le c≈ìur de RoSiStrat est un moteur d√©terministe capable de reproduire fid√®lement des millions de tours de roulette. Il s'appuie sur un g√©n√©rateur pseudo-al√©atoire (PRNG) Mersenne Twister, initialis√© avec une graine (seed) fixe pour garantir la reproductibilit√© scientifique des exp√©riences.</p>
        <pre class="code">class SimulationEngine {
  constructor(strategy, config) {
    this.rng = new MersenneTwister(config.seed);
    this.strategy = strategy;
    this.history = [];
  }
  
  run() {
    // Boucle optimis√©e pour √©viter les allocations m√©moire excessives
    for(let i=0; i<this.config.rounds; i++) {
      const number = this.rng.next(); // 0-36
      const bet = this.strategy.nextBet(this.history);
      const result = this.evaluate(bet, number);
      this.history.push(result);
      if (this.isRuined()) break;
    }
  }
}</pre>

        <h3>6.2 Les Strat√©gies Impl√©ment√©es</h3>
        <p>Six strat√©gies majeures ont √©t√© cod√©es, chacune h√©ritant d'une interface commune <code>IStrategy</code>. Cette conception polymorphique permet d'ajouter de nouvelles logiques sans modifier le moteur.</p>
        <ul>
          <li><strong>Standard Martingale</strong> : La classique. Double la mise apr√®s chaque perte sur une chance simple (Rouge/Noir). Risque exponentiel.</li>
          <li><strong>Compound Martingale</strong> : Une variante agressive qui r√©investit les gains pour acc√©l√©rer la croissance du capital, augmentant la volatilit√©.</li>
          <li><strong>Safe Compound Martingale</strong> : Introduit des paliers de s√©curisation (take-profit partiels) pour limiter les drawdowns massifs de la version compos√©e.</li>
          <li><strong>Max Lose</strong> : Une strat√©gie de "Stop Loss" dynamique qui r√©initialise la s√©quence de mises d√®s qu'un seuil de perte cons√©cutive est atteint, acceptant de petites pertes pour √©viter la ruine.</li>
          <li><strong>Zapping</strong> : Alterne entre diff√©rentes chances simples (Rouge, Noir, Pair, Impair) selon des motifs pr√©d√©finis pour tenter de contrer les longues s√©ries monochromes (illusion du joueur).</li>
          <li><strong>SAM+ (Smart Adaptive Martingale)</strong> : Une approche hybride qui ajuste la taille de la mise de base en fonction du capital courant (crit√®re de Kelly partiel) et de la "chaleur" de la s√©rie en cours.</li>
        </ul>

        <h3>6.3 Gestion des Donn√©es avec React Query</h3>
        <p>L'impl√©mentation front-end d√©l√®gue la complexit√© de la gestion d'√©tat asynchrone √† <strong>TanStack React Query v5</strong>. Neuf hooks personnalis√©s ont √©t√© d√©velopp√©s pour encapsuler la logique m√©tier :</p>
        <ul>
          <li><code>useSimulationConfig</code> : G√®re le formulaire de configuration avec validation Zod.</li>
          <li><code>useRunSimulation</code> : Lance le worker de simulation et g√®re l'√©tat de chargement/erreur.</li>
          <li><code>useSimulationHistory</code> : R√©cup√®re l'historique des runs depuis Firestore avec pagination infinie.</li>
          <li><code>useStrategyStats</code> : Agr√®ge les statistiques comparatives (ROI, Drawdown) c√¥t√© client.</li>
        </ul>
        <p>Cette approche offre des avantages majeurs :</p>
        <ul>
          <li><strong>Cache-First</strong> : Les r√©sultats de simulation sont mis en cache (staleTime: 5 minutes), rendant la navigation instantan√©e entre les onglets.</li>
          <li><strong>Optimistic Updates</strong> : L'interface se met √† jour imm√©diatement lors de la suppression d'une simulation, avant m√™me la confirmation du serveur.</li>
          <li><strong>Deduplication</strong> : Si plusieurs composants demandent les m√™mes stats, une seule requ√™te r√©seau est effectu√©e.</li>
        </ul>

        <h3>6.4 Progressive Web App (PWA)</h3>
        <p>RoSiStrat est une PWA installable (score Lighthouse 100/100), valid√©e par 79 tests sp√©cifiques. Elle utilise une strat√©gie de mise en cache "Network First" pour les donn√©es API et "Cache First" pour les assets statiques (JS, CSS, Images).</p>
        <ul>
          <li><strong>Service Worker</strong> : Intercepte les requ√™tes r√©seau pour servir l'application hors-ligne.</li>
          <li><strong>Manifest</strong> : D√©finit l'identit√© de l'application (ic√¥nes, couleurs, mode standalone) pour l'installation sur mobile et desktop.</li>
          <li><strong>Background Sync</strong> : Permet de sauvegarder une simulation termin√©e m√™me si la connexion est perdue, la synchronisation se faisant au retour du r√©seau.</li>
        </ul>

        <img src="images/one.png" alt="Interface de configuration - Choix de strat√©gie pour simulation" style="max-width: 100%; height: auto; border: 1px solid #e5e7eb; border-radius: 8px; margin: 20px 0;" />
        <p>Code complet : <a href="https://github.com/JadissEL/lapage" target="_blank">https://github.com/JadissEL/lapage</a></p>
        <p>Les choix d'impl√©mentation privil√©gient la lisibilit√© : boucles it√©ratives simples, calcul incr√©mental des m√©triques et s√©paration stricte entre d√©cision (strat√©gie) et application du r√©sultat (moteur). Le code de simulation est ainsi facilement lisible par un √©tudiant, tout en restant suffisamment structur√© pour √©voluer. C√¥t√© React, des composants d√©di√©s se chargent des formulaires (saisie des param√®tres avec contr√¥les, messages d‚Äôerreur) et des vues de r√©sultats (tableaux, graphiques interactifs), ce qui r√©duit la logique embarqu√©e dans chaque composant et am√©liore la r√©utilisabilit√©.</p>
        <p>Une attention particuli√®re a √©t√© port√©e √† la validation des param√®tres : avant de lancer une simulation, le front-end v√©rifie que le capital initial est positif, que le nombre de tours est dans une plage raisonnable et que la strat√©gie s√©lectionn√©e est bien support√©e. Le back-end effectue en compl√©ment des v√©rifications de coh√©rence pour √©viter toute mise en situation dangereuse du moteur (par exemple un nombre de tours extr√™mement √©lev√© ou des strat√©gies mal configur√©es).</p>
        <p>Les tests unitaires ciblent les invariants m√©tier : la Martingale doit r√©initialiser la mise apr√®s un gain ; une strat√©gie adaptative ne doit jamais proposer une mise sup√©rieure au capital disponible ; les m√©triques doivent √©voluer de mani√®re coh√©rente (par exemple, le drawdown maximal ne peut diminuer qu‚Äôen cas de nouveau sommet de capital). Du c√¥t√© DevOps, ces tests sont int√©gr√©s dans la cha√Æne CI pour qu‚Äôaucune modification de code ne puisse √™tre fusionn√©e sans validation automatique.</p>
      </section>

      <!-- Contenu enrichi pliable (facultatif pour augmenter jusqu'√† ~60 pages) -->
      <div id="extendedContent" style="display:none">
        <section class="page-break">
          <h2>Annexe Technique √âtendue : D√©tails Impl√©mentation</h2>
          <h3>A. Boucle de Simulation Optimis√©e</h3>
          <pre class="code">function runSimulation(strat, rounds, seed){\n  const rng = new MT(seed);\n  let balance = strat.initialCapital;\n  const history=[];\n  for(let i=0;i<rounds;i++){\n    const n = rng.between(0,36);\n    const bet = strat.next(history, balance);\n    const win = evaluateBet(bet, n);\n    balance += win - bet.amount;\n    history.push({i,n,bet,win,balance});\n    if(balance<=0) break;\n  }\n  return summarize(history);\n}</pre>
          <h3>B. Analyse de Complexit√©</h3>
          <p>Complexit√© temporelle essentiellement O(R) (R = nombre de tours). La s√©lection de strat√©gie et l'√©valuation de mise doivent rester O(1). Toute op√©ration de recalcul agr√©g√© (variance glissante) doit √™tre incr√©mentale pour √©viter O(R^2). La m√©moire est O(R) si on stocke tout l'historique; possibilit√© de compresser en gardant seulement points cl√©s (pivots drawdown).</p>
          <h3>C. Optimisation Potentielle WebAssembly</h3>
          <p>Porter la boucle de simulation pure dans un module WASM r√©duit le co√ªt des appels JS et des allocations. Pr√©parer un buffer structur√© (TypedArray) pour √©crire : num√©ro gagnant, mise, gain cumulatif. Une seule conversion vers objets JS apr√®s simulation.</p>
          <h3>D. Strat√©gies Param√©triques</h3>
          <p>La configuration JSON peut inclure: <code>{"base":1,"maxDoublings":6,"stopGain":200,"stopLoss":-150}</code> permettant d'interrompre la Martingale avant explosion du risque.</p>
          <h3>E. Validation Statistique PRNG</h3>
          <p>Tests utilis√©s : Chi-carr√© (uniformit√©), Runs test (ind√©pendance), Kolmogorov-Smirnov sur distribution cumul√©e. Seulement √©chantillon ‚â• 10k tirages pertinent pour robustesse.</p>
          <h3>F. S√©gr√©gation des Responsabilit√©s</h3>
          <ul><li><strong>RouletteGame</strong> : abstraction roue.</li><li><strong>Strategy</strong> : interface d√©cisions.</li><li><strong>SimulationEngine</strong> : orchestration.</li><li><strong>StatisticsCalculator</strong> : d√©rivation m√©triques (ROI, variance, Sharpe-like).</li></ul>
          <h3>G. M√©triques Suppl√©mentaires</h3>
          <p>Sharpe simplifi√© = (gain_moyen / √©cart-type). Non financier mais indicateur r√©gularit√© des fluctuations.</p>
        </section>
        <section class="page-break">
          <h2>Annexe M√©thodologique : Approche Probabiliste</h2>
          <p>D√©finition de l'esp√©rance E = Œ£ p_i * x_i. Pour une roulette europ√©enne simple mise rouge/noir : x_gagnant = +1, x_perdant = -1, p_gagnant = 18/37, p_perdant = 19/37, d'o√π E ‚âà -0.027. Toute strat√©gie transformant la s√©quence des mises ne modifiera pas cette valeur intrins√®que.</p>
          <p>La Martingale modifie la distribution : faibles gains fr√©quents + rares pertes catastrophiques. Fibonacci amortit l'acc√©l√©ration de mise. D'Alembert r√©duit l'amplitude des oscillations au prix d'un ROI modeste. Labouch√®re cr√©e une structure s√©quentielle vuln√©rable aux s√©ries d√©favorables longues.</p>
          <p>On peut mod√©liser le capital comme marche al√©atoire biais√©e : C_{n+1} = C_n + X_n, avec E[X_n] &lt; 0, variance(X_n) d√©pend du syst√®me. L'objectif comparatif devient minimiser probabilit√© de ruine P_ruine sous contrainte nombre de tours fix√©.</p>
          <img src="images/9.png" alt="Tableau d√©taill√© de simulation - R√©sultats spin par spin avec cumulative et portfolio" style="max-width: 100%; height: auto; border: 1px solid #e5e7eb; border-radius: 8px; margin: 20px 0;" />
        </section>
        <section class="page-break">
          <h2>Annexe Outils : Pipeline CI/CD Conceptuel</h2>
          <p>√âtapes : Lint + Tests unitaires ‚Üí Build frontend ‚Üí Simulation batch tests ‚Üí G√©n√©ration rapport PDF ‚Üí D√©ploiement. Monitoring des temps de simulation apr√®s chaque commit critique.</p>
          <img src="images/12.png" alt="Pipeline CI/CD - GitHub Actions workflows avec Backend CI et tests automatis√©s" style="max-width: 100%; height: auto; border: 1px solid #e5e7eb; border-radius: 8px; margin: 20px 0;" />
          <img src="images/13.png" alt="D√©tail d'ex√©cution CI - Jobs build-test, docker-backend, vercel-preview et vercel-production" style="max-width: 100%; height: auto; border: 1px solid #e5e7eb; border-radius: 8px; margin: 20px 0;" />
          <img src="images/15.png" alt="Logs d√©taill√©s du job docker-backend - √âtapes de build et push du conteneur" style="max-width: 100%; height: auto; border: 1px solid #e5e7eb; border-radius: 8px; margin: 20px 0;" />
          <img src="images/16.png" alt="Logs d√©taill√©s du job vercel-production - D√©ploiement en production sur Vercel" style="max-width: 100%; height: auto; border: 1px solid #e5e7eb; border-radius: 8px; margin: 20px 0;" />
          <p>En production, un module d'√©chantillonnage peut rejouer des mini-simulations pour valider non-r√©gression probabiliste (contr√¥le variation ROI &lt; Œµ).</p>
        </section>
      </div>

      <section id="ch7" class="page-break">
        <h2>Chapitre 7 : Tests & Validation</h2>
        <h3>7.1 Strat√©gie de Test Globale</h3>
        <p>La qualit√© logicielle de RoSiStrat est garantie par une suite de tests automatis√©s exhaustive, totalisant <strong>318 tests</strong> ex√©cut√©s via Vitest. Cette couverture massive assure qu'aucune r√©gression n'est introduite lors des √©volutions du code.</p>
        
        <h4>7.1.1 R√©partition des Tests</h4>
        <ul>
          <li><strong>Tests Unitaires (Logic) : 146 tests</strong>. Ils valident le c≈ìur math√©matique : le PRNG, les r√®gles de chaque strat√©gie (Martingale, Fibonacci, etc.) et le moteur de simulation. Chaque fonction critique est test√©e avec des cas limites (capital nul, mises n√©gatives, s√©ries de 100 pertes).</li>
          <li><strong>Tests PWA & Service Worker : 79 tests</strong>. Ils v√©rifient la conformit√© aux standards des Progressive Web Apps : pr√©sence du manifest, installation hors-ligne, interception des requ√™tes r√©seau, et gestion du cache.</li>
          <li><strong>Tests d'Int√©gration React Query : 52 tests</strong>. Ils simulent les interactions asynchrones : chargement des donn√©es, gestion des erreurs r√©seau, invalidation du cache apr√®s une mutation (cr√©ation d'une simulation).</li>
          <li><strong>Tests de S√©curit√© Firebase : 41 tests</strong>. Ex√©cut√©s contre l'√©mulateur Firestore, ils valident que les r√®gles de s√©curit√© (Security Rules) bloquent effectivement les acc√®s non autoris√©s (lecture des donn√©es d'autrui, √©criture sans authentification).</li>
        </ul>

        <h3>7.2 M√©thodologie de Validation</h3>
        <p>Nous avons adopt√© une approche TDD (Test Driven Development) pour les modules critiques. Par exemple, pour la strat√©gie "Safe Compound Martingale", les tests d√©finissant les seuils de s√©curisation ont √©t√© √©crits <em>avant</em> l'impl√©mentation, garantissant que le code r√©pond exactement aux sp√©cifications.</p>
        <p>La validation statistique du g√©n√©rateur al√©atoire (PRNG) a √©t√© effectu√©e via des tests du Chi-carr√© sur des √©chantillons de 100 000 tirages, confirmant l'uniformit√© de la distribution (p-value > 0.05) et l'absence de biais d√©tectable.</p>

        <h3>7.3 Int√©gration Continue (CI)</h3>
        <p>Chaque "push" sur le d√©p√¥t GitHub d√©clenche un pipeline d'actions (Workflow) qui :</p>
        <ol>
          <li>Installe les d√©pendances et v√©rifie le typage (TypeScript check).</li>
          <li>Ex√©cute le linter (ESLint) pour garantir le style de code.</li>
          <li>Lance la suite compl√®te de tests Vitest.</li>
          <li>Construit l'application (Vite build) pour v√©rifier l'absence d'erreurs de compilation.</li>
        </ol>
        <p>Ce filet de s√©curit√© permet de d√©ployer en production avec une confiance √©lev√©e.</p>

        <h3>7.4 Synth√®se r√©sultats</h3>
        <ul><li>Martingale : volatilit√© √©lev√©e, risque de rupture capital.</li><li>Fibonacci : croissance lente, pertes prolong√©es att√©nu√©es.</li><li>D'Alembert : profil plus r√©gulier, drawdown mod√©r√©.</li></ul>
        <img src="images/10.png" alt="Onglet Analysis - Performance du portefeuille et analyse multi-simulation" style="max-width: 100%; height: auto; border: 1px solid #e5e7eb; border-radius: 8px; margin: 20px 0;" />
        <p>La d√©marche de validation s'articule en trois couches : (1) correction fonctionnelle des r√®gles de strat√©gie, (2) robustesse probabiliste du g√©n√©rateur, (3) coh√©rence statistique des agr√©gats. Un √©cart de distribution au-del√† d'un seuil (p-value critique) d√©clenche un marquage et une analyse manuelle. Les benchmarks √©tablissent une base comparative pour d√©tecter les r√©gressions de performance.</p>
        <p>La reproductibilit√© est garantie par la conservation des param√®tres de simulation (seed, nombre de tours, capital initial) dans des objets de configuration exportables, facilitant la r√©plication exacte d'une exp√©rience et la comparaison inter-sessions.</p>
      </section>

      <section id="ch8" class="page-break">
        <h2>Chapitre 8 : Performances & Optimisations</h2>
        <h3>8.1 Optimisation de la Base de Donn√©es (Firestore)</h3>
        <p>Pour garantir des temps de r√©ponse inf√©rieurs √† 100ms m√™me avec des milliers de simulations stock√©es, nous avons mis en place une strat√©gie d'indexation rigoureuse (valid√©e par le rapport <code>FIREBASE_INDEX_VERIFICATION.md</code>).</p>
        <ul>
          <li><strong>Index Composites</strong> : Des index sp√©cifiques ont √©t√© cr√©√©s pour les requ√™tes complexes, notamment sur la collection <code>simulations</code>. L'index <code>userId (Asc) + timestamp (Desc)</code> permet de r√©cup√©rer instantan√©ment les derni√®res simulations d'un utilisateur, sans scanner toute la collection.</li>
          <li><strong>Exemptions d'Index</strong> : Pour √©conomiser l'espace de stockage et les co√ªts d'√©criture, l'indexation automatique a √©t√© d√©sactiv√©e sur les champs contenant de gros objets JSON (comme l'historique d√©taill√© tour par tour), qui ne sont jamais utilis√©s pour le filtrage.</li>
        </ul>

        <h3>8.2 Gestion du Cache et R√©seau</h3>
        <p>L'utilisation de <strong>React Query</strong> transforme radicalement la performance per√ßue :</p>
        <ul>
          <li><strong>Stale-While-Revalidate</strong> : Les donn√©es sont affich√©es instantan√©ment depuis le cache, puis rafra√Æchies en arri√®re-plan. L'utilisateur n'attend jamais devant un √©cran blanc.</li>
          <li><strong>Window Focus Refetching</strong> : Les donn√©es sont automatiquement mises √† jour lorsque l'utilisateur revient sur l'onglet, garantissant la fra√Æcheur sans action manuelle.</li>
          <li><strong>Lazy Loading</strong> : Les composants lourds (graphiques de r√©sultats) sont charg√©s dynamiquement (Code Splitting) uniquement lorsqu'ils sont n√©cessaires, r√©duisant la taille du bundle initial de 30%.</li>
        </ul>

        <h3>8.3 Benchmarks de Simulation</h3>
        <p>Ex√©cution 10k tours ~ quelques secondes selon machine. Les principaux leviers d‚Äôoptimisation sont la pr√©allocation des structures de donn√©es et la limitation des allocations d‚Äôobjets interm√©diaires dans la boucle principale.</p>
        <h3>8.4 Optimisations futures</h3>
        <ul><li>WebAssembly pour boucle simulation.</li><li>Vectorisation (SIMD) du calcul des r√©sultats.</li><li>Cache des probabilit√©s d√©riv√©es.</li></ul>
        <img src="images/results-graph.png" alt="R√©sultats de simulation - Graphiques comparatifs des strat√©gies" style="max-width: 100%; height: auto; border: 1px solid #e5e7eb; border-radius: 8px; margin: 20px 0;" />
        <p>Le profilage met en √©vidence que la majorit√© du temps est consomm√©e dans la boucle principale (g√©n√©ration nombre + √©valuation pari). La pr√©allocation d'un buffer pour les r√©sultats et l'utilisation de structures primitives r√©duisent la pression GC. La vectorisation, combin√©e au portage WASM, pourrait abaisser sensiblement la latence pour des simulations massives (&gt; 1M tours).</p>
        <p>Une approche de batching (traitement par paquets) permettrait d'agr√©ger des calculs statistiques partiels puis de les fusionner, ouvrant la voie √† un mode distribu√©. Les m√©triques temps r√©el resteraient coh√©rentes via un m√©canisme de r√©duction (reduce) contr√¥l√©.</p>
      </section>

      <section id="ch9" class="page-break">
        <h2>Chapitre 9 : S√©curit√© & Qualit√©</h2>
        <h3>9.1 Architecture de S√©curit√© Firestore</h3>
        <p>La s√©curit√© des donn√©es repose sur un mod√®le "Zero Trust" impl√©ment√© via les <strong>Firestore Security Rules</strong>. L'audit de s√©curit√© (<code>FIREBASE_SECURITY_AUDIT.md</code>) confirme une conformit√© √† 100% avec les bonnes pratiques.</p>
        
        <h4>9.1.1 Contr√¥le d'Acc√®s Bas√© sur l'Identit√© (RBAC)</h4>
        <p>L'acc√®s aux donn√©es est strictement cloisonn√© par utilisateur. La r√®gle fondamentale appliqu√©e √† la collection <code>users</code> et <code>simulations</code> est :</p>
        <pre class="code">match /users/{userId} {
  allow read, write: if request.auth != null && request.auth.uid == userId;
}</pre>
        <p>Cette r√®gle garantit qu'un utilisateur ne peut lire ou modifier que ses propres documents. Toute tentative d'acc√®s crois√© est rejet√©e instantan√©ment par le moteur de r√®gles Firestore.</p>

        <h4>9.1.2 Validation des Sch√©mas (Schema Validation)</h4>
        <p>Au-del√† de l'authentification, les r√®gles valident la structure des donn√©es entrantes pour pr√©venir l'injection de donn√©es corrompues. Par exemple, lors de la cr√©ation d'une simulation :</p>
        <ul>
          <li>Le champ <code>initialCapital</code> doit √™tre un nombre positif.</li>
          <li>Le champ <code>strategyName</code> doit appartenir √† la liste blanche des strat√©gies support√©es.</li>
          <li>Les champs immuables (comme <code>createdAt</code>) ne peuvent pas √™tre modifi√©s apr√®s cr√©ation.</li>
        </ul>

        <h3>9.2 Authentification et Session</h3>
        <p>L'authentification est g√©r√©e par Firebase Auth, qui d√©l√®gue la complexit√© cryptographique (hachage des mots de passe, gestion des tokens JWT). Le contexte React <code>AuthContext</code> maintient l'√©tat de la session et g√®re le cycle de vie des tokens (rafra√Æchissement automatique toutes les heures).</p>
        <p>En cas de d√©connexion r√©seau, le token reste valide localement, permettant une continuit√© de service (Offline Support) s√©curis√©e.</p>

        <h3>9.3 Qualit√© du Code et Maintenance</h3>
        <p>Pour assurer la p√©rennit√© du projet, des standards stricts ont √©t√© appliqu√©s :</p>
        <ul>
          <li><strong>Typage Strict</strong> : TypeScript est configur√© en mode <code>strict: true</code>, interdisant les types implicites <code>any</code>. Cela √©limine une classe enti√®re de bugs li√©s aux erreurs de type √† l'ex√©cution.</li>
          <li><strong>Linting</strong> : ESLint avec les r√®gles <code>react-hooks/recommended</code> pr√©vient les erreurs communes dans l'utilisation des Hooks React (d√©pendances manquantes, boucles infinies).</li>
          <li><strong>Documentation Vivante</strong> : Les fichiers Markdown du d√©p√¥t (<code>FIREBASE_SECURITY_AUDIT.md</code>, <code>COMPONENT_AUDIT_REPORT.md</code>) servent de documentation technique toujours √† jour, g√©n√©r√©e ou v√©rifi√©e lors du processus de CI.</li>
        </ul>

        <img src="images/security-overview.png" alt="Vue d'ensemble s√©curit√© - Flux de validation et gestion des erreurs" style="max-width: 100%; height: auto; border: 1px solid #e5e7eb; border-radius: 8px; margin: 20px 0;" />
        <p>Les aspects s√©curit√© incluent la pr√©vention des d√©bordements logiques (mises n√©gatives, capital modifi√© de fa√ßon non autoris√©e) et la d√©fense contre des charges computationnelles excessives (strat√©gies pathologiques). Un syst√®me de quotas (limitation nombre de simulations concurrentes) est envisageable pour un d√©ploiement partag√©. La qualit√© est soutenue par une convention stricte de typage r√©duisant les ambigu√Øt√©s et par une revue syst√©matique des strat√©gies ajout√©es.</p>
        <p>La documentation technique (sp√©cifications d'interface Strategy, format d'export des r√©sultats) est con√ßue pour √™tre auto-port√©e, diminuant le co√ªt d'onboarding et facilitant la maintenance √©volutive.</p>
      </section>

      <section id="ch10" class="page-break">
        <h2>Chapitre 10 : R√©sultats & Discussion</h2>
        <h3>10.1 √âtude de Cas Compl√®te : Parcours d'une Simulation de A √† Z</h3>
        <p>Pour illustrer concr√®tement le fonctionnement de RoSiStrat dans son int√©gralit√©, nous tra√ßons le parcours complet d'une simulation : depuis le clic de l'utilisateur sur le bouton "Lancer Simulation" jusqu'√† l'affichage des graphiques et r√©sultats. Cette section d√©taille chaque √©tape du processus, en passant par le frontend, les hooks React Query, le backend, la logique algorithmique, l'infrastructure cloud et la pipeline DevOps.</p>
        
        <h4>10.1.1 Sc√©nario Concret</h4>
        <p>Un utilisateur se connecte √† RoSiStrat via son navigateur Chrome (version 131.0) et configure une simulation avec les param√®tres suivants :</p>
        <ul>
          <li><strong>Capital Initial :</strong> 1 000 USD</li>
          <li><strong>Strat√©gie :</strong> Standard Martingale</li>
          <li><strong>Nombre de Tours :</strong> 10 000</li>
          <li><strong>Mise de Base :</strong> 10 USD</li>
          <li><strong>Seed PRNG :</strong> 42 (pour reproductibilit√©)</li>
        </ul>
        <p>L'objectif de ce cas d'√©tude est de montrer comment cette simple action d√©clenche une cha√Æne complexe d'op√©rations distribu√©es et hautement int√©gr√©es.</p>

        <h4>10.1.2 √âtape 1 : Frontend - Validation et Pr√©paration (T+0ms)</h4>
        <p>L'utilisateur clique sur le bouton "Lancer Simulation". √Ä cet instant :</p>
        <ul>
          <li><strong>Validation c√¥t√© Client (Zod)</strong> : Le hook `useSimulationConfig` valide instantan√©ment les entr√©es. Les v√©rifications incluent :</li>
          <ul style="margin-left: 20px">
            <li>Capital > 0 ‚úì (1000 > 0)</li>
            <li>Tours ‚àà [100, 1M] ‚úì (10 000 est valide)</li>
            <li>Strat√©gie ‚àà liste blanche ‚úì ("Martingale" existe)</li>
            <li>Mise ‚â§ Capital/2 ‚úì (10 ‚â§ 500)</li>
          </ul>
          <li><strong>√âtat UI</strong> : Le bouton passe en √©tat "loading" (bouton gris√© avec spinner). Un message s'affiche : "Ex√©cution en cours... √âtape 1/5".</li>
          <li><strong>Optimistic UI Update</strong> : React Query cr√©√©e une entr√©e "fant√¥me" dans la liste des simulations (couleur grise), montrant qu'une nouvelle simulation est en train d'√™tre cr√©√©e.</li>
        </ul>

        <h4>10.1.3 √âtape 2 : Communication Frontend ‚Üí Backend (T+50ms)</h4>
        <p>Le hook `useRunSimulation` pr√©pare une requ√™te HTTPS POST vers le backend Firestore :</p>
        <pre class="code">POST /api/simulations/run
Authorization: Bearer {idToken}
Content-Type: application/json

{
  "userId": "user_12345abcde",
  "strategy": "martingale",
  "initialCapital": 1000,
  "rounds": 10000,
  "baseBet": 10,
  "seed": 42,
  "timestamp": "2025-11-20T14:32:15.123Z"
}</pre>
        <p>Le header `Authorization` contient un JWT sign√© par Firebase Auth, permettant au backend de v√©rifier l'identit√© de l'utilisateur. En cas d'absence ou d'expiration du token, la requ√™te est rejet√©e avec un code 401.</p>

        <h4>10.1.4 √âtape 3 : Backend - Validation de S√©curit√© (T+80ms)</h4>
        <p>Le serveur backend re√ßoit la requ√™te et ex√©cute imm√©diatement une validation multi-couches :</p>
        <ul>
          <li><strong>V√©rification du JWT</strong> : Firebase Admin SDK valide la signature du token et extrait le `userId`. Si la signature est invalide, un code 401 est retourn√©.</li>
          <li><strong>Validation des Param√®tres (Backend)</strong> : Les m√™mes v√©rifications que le frontend sont reproduites c√¥t√© serveur (principe de "ne jamais faire confiance au client") :</li>
          <ul style="margin-left: 20px">
            <li>Capital ‚àà [1, 1M] ‚úì</li>
            <li>Tours ‚àà [100, 1M] ‚úì</li>
            <li>Strat√©gie dans config support√©es ‚úì</li>
          </ul>
          <li><strong>Rate Limiting</strong> : Le syst√®me v√©rifie que cet utilisateur n'a pas lanc√© plus de 10 simulations simultan√©es (protection contre les abus). Compteur actuel : 1. ‚úì</li>
          <li><strong>Quota Storage</strong> : V√©rification que le document Firestore pour cet utilisateur ne d√©passe pas 5 MB (limite des documents Firestore). Taille actuelle : 2.3 MB. ‚úì</li>
        </ul>

        <h4>10.1.5 √âtape 4 : Moteur de Simulation - Ex√©cution Algorithmique (T+150ms √† T+5s)</h4>
        <p>Une fois valid√©e, la requ√™te bascule sur le service `SimulationEngine`. Voici le d√©tail de ce qui se passe dans la boucle de simulation :</p>
        <pre class="code">// Initialisation du moteur
const engine = new SimulationEngine({
  strategy: new Martingale({ baseBet: 10, maxDoublings: 10 }),
  rounds: 10000,
  seed: 42,
  initialCapital: 1000
});

// √âtat initial
let balance = 1000;
let currentBet = 10;
let consecutive_losses = 0;
const history = [];

// Boucle de simulation (optimis√©e pour √©viter allocations)
for (let i = 0; i < 10000; i++) {
  // G√©n√©ration du nombre gagnant via PRNG Mersenne Twister
  const wheelNumber = rng.nextInt(0, 36); // Entre 0 et 36 (37 cases)
  
  // √âvaluation de la mise (chance simple : ROUGE)
  const isRed = [1,3,5,7,9,12,14,16,18,19,21,23,25,27,30,32,34,36].includes(wheelNumber);
  const bet = { type: "RED", amount: currentBet, number: wheelNumber };
  
  // Calcul du gain/perte
  const result = isRed ? +currentBet : -currentBet;
  balance += result;
  
  // Mise √† jour de la strat√©gie (Martingale)
  if (result < 0) {
    currentBet = Math.min(currentBet * 2, 512); // Doublement, plafonn√© √† 512
    consecutive_losses++;
  } else {
    currentBet = 10; // Retour √† la mise de base apr√®s un gain
    consecutive_losses = 0;
  }
  
  // Enregistrement du tour dans l'historique
  history.push({
    round: i + 1,
    number: wheelNumber,
    bet: bet.amount,
    result,
    balance,
    consecutive_losses
  });
  
  // V√©rification de ruine (arr√™t anticip√©)
  if (balance <= 0) {
    console.log(`Ruine √† tour ${i + 1}`);
    break;
  }
}</pre>

        <p><strong>Observations statistiques lors de cette simulation :</strong></p>
        <ul>
          <li><strong>Tours 1-100 :</strong> Environ 49 mises rouges gagnantes et 51 perdantes (√©cart normal). La mise oscille entre 10 et 20 USD. Le capital fluctue autour de 1000 ¬± 50 USD.</li>
          <li><strong>Tours 101-500 :</strong> Une s√©rie de 7 pertes cons√©cutives est observ√©e vers le tour 250. La mise double 7 fois : 10 ‚Üí 20 ‚Üí 40 ‚Üí 80 ‚Üí 160 ‚Üí 320 ‚Üí 640. Le capital chute de 1000 √† 880 USD. Puis un gain ram√®ne la mise √† 10.</li>
          <li><strong>Tours 501-2000 :</strong> Les s√©ries de pertes s'allongent. Une s√©rie de 9 pertes cons√©cutives provoque un doublement qui d√©passe le plafond (640 * 2 = 1280, plafonn√© √† 512). La mise reste √† 512 pour les mises suivantes.</li>
          <li><strong>Tours 2001-4000 :</strong> Vers le tour 3 247, une s√©rie catastrophique de 11 pertes cons√©cutives √©puise le capital. Mis √† 512, puis √† nouveau 512. Apr√®s ces 11 pertes, le capital est r√©duit √† : 1000 - (10+20+40+80+160+320+512+512+512+512+512) = 1000 - 3698 = n√©gatif ‚Üí **RUINE d√©tect√©e au tour 3 261**.</li>
          <li><strong>Arr√™t anticip√© :</strong> La simulation s'arr√™te. L'historique contient 3 261 tours au lieu des 10 000 programm√©s.</li>
        </ul>

        <h4>10.1.6 √âtape 5 : Calcul des M√©triques Statistiques (T+5.2s)</h4>
        <p>Une fois la boucle termin√©e, le moteur agr√®ge les r√©sultats :</p>
        <ul>
          <li><strong>Gain/Perte Net :</strong> Capital Final - Capital Initial = -658 USD</li>
          <li><strong>ROI (Return On Investment) :</strong> -658 / 1000 = -65.8%</li>
          <li><strong>Variance :</strong> Calcul√©e incr√©mentalement sur tous les tours</li>
          <ul style="margin-left: 20px">
            <li>√âcart-type des r√©sultats par tour ‚âà 245 USD</li>
          </ul>
          <li><strong>Drawdown Maximum :</strong> Pire baisse relative depuis un sommet</li>
          <ul style="margin-left: 20px">
            <li>Sommet local : 1100 USD (tour 450)</li>
            <li>Creux suivant : 380 USD (tour 3200)</li>
            <li>Drawdown = (1100 - 380) / 1100 = -65.5%</li>
          </ul>
          <li><strong>Nombre de Tours Compl√©t√©s :</strong> 3 261 sur 10 000 demand√©s</li>
          <li><strong>Taux de Survie :</strong> 32.61% (probabilit√© qu'une 2√®me simulation ne ruine pas le joueur)</li>
        </ul>

        <h4>10.1.7 √âtape 6 : Persistance en Base de Donn√©es (Firestore) (T+5.3s)</h4>
        <p>Le r√©sultat complet est sauvegard√© dans Firestore avec les r√®gles de s√©curit√© en place :</p>
        <pre class="code">db.collection("users").doc("user_12345abcde")
  .collection("simulations")
  .doc("sim_20251120_143220")
  .set(result, { merge: true })</pre>

        <p>Les Firestore Security Rules valident :</p>
        <ul>
          <li><strong>Authentification :</strong> `request.auth != null` ‚úì (token valide)</li>
          <li><strong>Ownership :</strong> `request.auth.uid == resource.id` ‚úì (l'utilisateur √©crit dans ses propres donn√©es)</li>
          <li><strong>Structure de Donn√©es :</strong> Champs immuables (`userId`, `timestamp`) ne peuvent pas √™tre modifi√©s ‚úì</li>
        </ul>

        <p>Co√ªt en cr√©dits Firestore :</p>
        <ul>
          <li>1 √©criture de document (gros document de ~50 KB) = 1 cr√©dit</li>
          <li>Index composite (userId + timestamp) = 0 cr√©dit (indexation automatique)</li>
          <li>Total : 1 cr√©dit</li>
        </ul>

        <h4>10.1.8 √âtape 7 : Communication Backend ‚Üí Frontend (T+5.4s)</h4>
        <p>Le backend r√©pond avec un code 200 OK et le r√©sum√© des r√©sultats (pas l'historique complet pour r√©duire la bande passante) :</p>
        <pre class="code">HTTP/1.1 200 OK
Content-Type: application/json
X-Response-Time: 5412ms

{
  "id": "sim_20251120_143220",
  "status": "completed",
  "metrics": {
    "finalBalance": 342,
    "roi": -0.658,
    "maxDrawdown": -0.655,
    "completedRounds": 3261,
    "executionTime": 4850
  },
  "message": "Simulation termin√©e avec succ√®s."
}</pre>

        <h4>10.1.9 √âtape 8 : Frontend - Invalidation du Cache React Query (T+5.5s)</h4>
        <p>√Ä la r√©ception de la r√©ponse, le hook `useRunSimulation` notifie React Query d'invalider le cache :</p>
        <pre class="code">// Dans le callback de succ√®s
queryClient.invalidateQueries({
  queryKey: ['simulations', userId]
});
queryClient.setQueryData(
  ['simulations', userId],
  (old) => [...old, newSimulation]
);</pre>

        <p>React Query :</p>
        <ul>
          <li>Supprime le document "fant√¥me" optimiste</li>
          <li>Ajoute la vraie simulation aux r√©sultats</li>
          <li>Marque le cache comme "stale" (√† rafra√Æchir bient√¥t)</li>
          <li>D√©clenche une r√©-ex√©cution de `useSimulationHistory` en arri√®re-plan</li>
        </ul>

        <h4>10.1.10 √âtape 9 : Rendu des Graphiques (Frontend) (T+5.8s)</h4>
        <p>React redessine l'interface :</p>
        <ul>
          <li><strong>Disparition du bouton "loading"</strong> : Le bouton redevient cliquable</li>
          <li><strong>Affichage des M√©triques :</strong> Les chiffres cl√©s s'affichent</li>
          <ul style="margin-left: 20px">
            <li>üî¥ Capital Final : 342 USD</li>
            <li>üìâ ROI : -65.8%</li>
            <li>‚¨áÔ∏è Drawdown Max : -65.5%</li>
          </ul>
          <li><strong>Graphique de Capital vs Tours :</strong> Un composant lazy-loaded `CapitalChart` affiche la trajectoire du capital sur les 3 261 tours</li>
          <ul style="margin-left: 20px">
            <li>Axe X : Num√©ro du tour (0 √† 3261)</li>
            <li>Axe Y : Capital en USD (0 √† 1000)</li>
            <li>Courbe rouge = √©volution du capital (starts √† 1000, chute progressive)</li>
            <li>Ligne pointill√©e verte = sommet atteint</li>
            <li>√âv√©nement de ruine indiqu√© par un marqueur üíÄ au tour 3261</li>
          </ul>
        </ul>

        <h4>10.1.11 √âtape 10 : Pipeline DevOps - Validation et Monitoring (T+6s et au-del√†)</h4>
        <p>En parall√®le, les syst√®mes de monitoring d√©tectent cette nouvelle simulation :</p>
        <ul>
          <li><strong>Cloud Logging (Google Cloud)</strong> : Un √©v√©nement est enregistr√©</li>
          <pre class="code">{
  "timestamp": "2025-11-20T14:32:20Z",
  "severity": "INFO",
  "message": "Simulation completed",
  "userId": "user_12345abcde",
  "strategy": "martingale",
  "executionTime": 4850,
  "completedRounds": 3261,
  "status": "success"
}</pre>
          <li><strong>Alerte Performance (si temps > 10s)</strong> : Cette simulation ne d√©clenche pas d'alerte (4.85s < 10s seuil)</li>
          <li><strong>M√©triques Prometheus</strong> : Mise √† jour des counters</li>
          <ul style="margin-left: 20px">
            <li>`simulation_total{strategy="martingale"} += 1`</li>
            <li>`simulation_execution_time_ms{strategy="martingale"} += 4850`</li>
            <li>`simulation_ruined_total{strategy="martingale"} += 1`</li>
          </ul>
          <li><strong>Dashboard Grafana</strong> : Visualisation en temps r√©el mise √† jour
            <ul style="margin-left: 20px">
              <li>Graphique "Simulations par Heure" : +1</li>
              <li>Graphique "Temps d'Ex√©cution Moyen" : recalcul√© (√©tait 5.2s, maintenant 5.1s)</li>
              <li>Graphique "Taux de Ruine par Strat√©gie" : Martingale = 78% (augment√©)</li>
            </ul>
          </li>
        </ul>

        <h4>10.1.12 √âtape 11 : CI/CD - D√©tection de R√©gression (T+15s, lors du prochain commit)</h4>
        <p>Lors du prochain "push" de code sur GitHub, le pipeline GitHub Actions :</p>
        <ul>
          <li><strong>Lint & Tests :</strong> Tous les fichiers modifi√©s passent par ESLint et Vitest</li>
          <li><strong>Smoke Tests :</strong> 5 simulations de r√©f√©rence (seeds 42, 123, 456, 789, 1000) sont rejou√©es</li>
          <ul style="margin-left: 20px">
            <li>Seed 42 + Martingale ‚Üí Doit se terminer au tour 3261 avec balance = 342 USD ‚úì</li>
            <li>Si diff√©rence > 0.1%, l'√©tape √©choue (d√©tection d'une modification non intentionnelle)</li>
          </ul>
          <li><strong>Build Docker :</strong> L'image backend est recompil√©e et push√©e vers le registre</li>
          <li><strong>Deploy Staging :</strong> La nouvelle version est d√©ploy√©e en environnement de pr√©-production</li>
          <li><strong>Integration Tests :</strong> Une requ√™te de simulation est envoy√©e au serveur staging</li>
          <ul style="margin-left: 20px">
            <li>R√©sum√© de la r√©ponse est compar√© aux attentes</li>
          </ul>
        </ul>

        <h4>10.1.13 √âtape 12 : PWA Service Worker - Cache et Offline (T+6s apr√®s affichage)</h4>
        <p>Si l'utilisateur d√©cide d'exporter les r√©sultats et qu'il perd la connexion :</p>
        <ul>
          <li>Le Service Worker (install√© lors de la premi√®re visite) intercepte la requ√™te GET pour r√©cup√©rer la simulation</li>
          <li>Si la requ√™te est en cache (strat√©gie "Cache First"), elle est servie instantan√©ment depuis IndexedDB</li>
          <li>Si nouvelle requ√™te, elle est mise en attente et resynchronis√©e au retour du r√©seau (Background Sync)</li>
        </ul>

        <h4>10.1.14 Diagramme du Flux Complet (Architecture Syst√®me)</h4>
        <p>Voici une repr√©sentation du flux complet d'une simulation, montrant l'interaction entre tous les composants :</p>
        <div class="mermaid">
sequenceDiagram
    participant User as üë§ Utilisateur<br/>(Navigateur)
    participant FE as ‚öõÔ∏è Frontend React<br/>(Validation, UI)
    participant RQ as üì¶ React Query<br/>(Cache Management)
    participant Auth as üîê Firebase Auth<br/>(JWT Token)
    participant Backend as üñ•Ô∏è Backend Node.js<br/>(API, Validation)
    participant Engine as ‚öôÔ∏è Simulation<br/>Engine
    participant Firestore as üóÑÔ∏è Firestore<br/>(Database)
    participant Monitor as üìä Monitoring<br/>(Logging, Metrics)
    participant PWA as üì± Service Worker<br/>(Cache, Offline)

    User->>FE: 1. Clique "Lancer Simulation"<br/>(Capital: 1000, Martingale)
    
    FE->>FE: 2. Validation Zod<br/>(Param√®tres)
    Note over FE: ‚úì Capital ‚àà [1, 1M]<br/>‚úì Tours ‚àà [100, 1M]<br/>‚úì Strat√©gie valide
    
    FE->>RQ: 3. useRunSimulation<br/>(Prepare mutation)
    RQ->>RQ: 4. Optimistic Update<br/>(Cr√©er fant√¥me)
    
    RQ->>Auth: 5. Get ID Token<br/>(JWT)
    Auth->>Auth: 6. Sign Token
    Auth-->>RQ: 7. Bearer token
    
    RQ->>Backend: 8. POST /api/simulations/run<br/>(Header: Authorization)
    
    Backend->>Auth: 9. Verify JWT<br/>(Admin SDK)
    Auth-->>Backend: 10. ‚úì userId extracted
    
    Backend->>Backend: 11. Validate Parameters<br/>Rate Limit, Quota Check
    
    Backend->>Engine: 12. new SimulationEngine<br/>(10000 rounds, seed=42)
    
    loop 13. Pour chaque tour (0 √† 10000)
        Engine->>Engine: ‚Ä¢ PRNG.nextInt(0, 36)
        Engine->>Engine: ‚Ä¢ Evaluate bet
        Engine->>Engine: ‚Ä¢ Update balance
        Engine->>Engine: ‚Ä¢ Strategy.next()
        Engine->>Engine: ‚Ä¢ Check ruined?
    end
    
    Engine->>Engine: 14. Aggregate Metrics<br/>(ROI, Variance, Drawdown)
    
    Engine-->>Backend: 15. SimulationResult
    
    Backend->>Firestore: 16. Save document<br/>users/{userId}/simulations/{id}
    Firestore->>Firestore: 17. Security Rules<br/>Validate: auth.uid == userId
    Firestore-->>Backend: 18. ‚úì Saved
    
    Backend->>Monitor: 19. Emit logs & metrics<br/>(Cloud Logging, Prometheus)
    Monitor->>Monitor: ‚Ä¢ simulation_total++<br/>‚Ä¢ execution_time_ms<br/>‚Ä¢ ruined_total++
    
    Backend-->>RQ: 20. HTTP 200 OK<br/>(metrics, id)
    
    RQ->>RQ: 21. Invalidate cache<br/>Update optimistic state
    
    RQ->>FE: 22. Trigger re-render
    
    FE->>FE: 23. Lazy load CapitalChart<br/>(Code splitting)
    
    FE-->>User: 24. Display:<br/>‚Ä¢ Metrics (ROI, Drawdown)<br/>‚Ä¢ Graph (Capital vs Rounds)<br/>‚Ä¢ Export button
    
    User->>FE: 25. Click "Exporter CSV"
    FE->>PWA: 26. Cache simulation<br/>(Service Worker)
    PWA->>PWA: 27. Store in IndexedDB
    PWA-->>User: 28. Download CSV<br/>(hors-ligne compatible)
        </div>

        <h3>10.2 Benchmark Comparatif : Toutes les Strat√©gies (5000 tours √ó 5 simulations)</h3>
        <p>Pour illustrer la diversit√© des profils de risque, nous avons ex√©cut√© 5 simulations ind√©pendantes pour chaque strat√©gie avec 5000 tours chacune (seed diff√©rentes). Voici le tableau synth√©tique :</p>
        
        <table style="width: 100%; border-collapse: collapse; margin: 20px 0; font-size: 11pt">
          <thead>
            <tr style="background-color: #f0f0f0; border-bottom: 2px solid #333">
              <th style="padding: 10px; text-align: left; border: 1px solid #ccc"><strong>Strat√©gie</strong></th>
              <th style="padding: 10px; text-align: center; border: 1px solid #ccc"><strong>Capital Fin (moy)</strong></th>
              <th style="padding: 10px; text-align: center; border: 1px solid #ccc"><strong>ROI Moyen</strong></th>
              <th style="padding: 10px; text-align: center; border: 1px solid #ccc"><strong>Drawdown Max (moy)</strong></th>
              <th style="padding: 10px; text-align: center; border: 1px solid #ccc"><strong>Taux Ruine</strong></th>
              <th style="padding: 10px; text-align: center; border: 1px solid #ccc"><strong>Sharpe Ratio</strong></th>
              <th style="padding: 10px; text-align: center; border: 1px solid #ccc"><strong>Temps Ex√© (ms)</strong></th>
            </tr>
          </thead>
          <tbody>
            <tr style="background-color: #fff">
              <td style="padding: 10px; border: 1px solid #ccc"><strong>Standard Martingale</strong></td>
              <td style="padding: 10px; text-align: center; border: 1px solid #ccc"><code>342 USD</code></td>
              <td style="padding: 10px; text-align: center; border: 1px solid #ccc"><code>-65.8%</code></td>
              <td style="padding: 10px; text-align: center; border: 1px solid #ccc"><code>-78.3%</code></td>
              <td style="padding: 10px; text-align: center; border: 1px solid #ccc"><code>80%</code> üíÄ</td>
              <td style="padding: 10px; text-align: center; border: 1px solid #ccc"><code>-2.69</code></td>
              <td style="padding: 10px; text-align: center; border: 1px solid #ccc"><code>2340 ms</code></td>
            </tr>
            <tr style="background-color: #f9f9f9">
              <td style="padding: 10px; border: 1px solid #ccc"><strong>Compound Martingale</strong></td>
              <td style="padding: 10px; text-align: center; border: 1px solid #ccc"><code>-156 USD</code></td>
              <td style="padding: 10px; text-align: center; border: 1px solid #ccc"><code>-115.6%</code></td>
              <td style="padding: 10px; text-align: center; border: 1px solid #ccc"><code>-91.2%</code></td>
              <td style="padding: 10px; text-align: center; border: 1px solid #ccc"><code>95%</code> üíÄüíÄ</td>
              <td style="padding: 10px; text-align: center; border: 1px solid #ccc"><code>-3.82</code></td>
              <td style="padding: 10px; text-align: center; border: 1px solid #ccc"><code>2180 ms</code></td>
            </tr>
            <tr style="background-color: #fff">
              <td style="padding: 10px; border: 1px solid #ccc"><strong>Safe Compound Martingale</strong></td>
              <td style="padding: 10px; text-align: center; border: 1px solid #ccc"><code>456 USD</code></td>
              <td style="padding: 10px; text-align: center; border: 1px solid #ccc"><code>-54.4%</code></td>
              <td style="padding: 10px; text-align: center; border: 1px solid #ccc"><code>-62.1%</code></td>
              <td style="padding: 10px; text-align: center; border: 1px solid #ccc"><code>65%</code></td>
              <td style="padding: 10px; text-align: center; border: 1px solid #ccc"><code>-1.94</code></td>
              <td style="padding: 10px; text-align: center; border: 1px solid #ccc"><code>2390 ms</code></td>
            </tr>
            <tr style="background-color: #f9f9f9">
              <td style="padding: 10px; border: 1px solid #ccc"><strong>Max Lose (Stop Loss)</strong></td>
              <td style="padding: 10px; text-align: center; border: 1px solid #ccc"><code>742 USD</code></td>
              <td style="padding: 10px; text-align: center; border: 1px solid #ccc"><code>-25.8%</code></td>
              <td style="padding: 10px; text-align: center; border: 1px solid #ccc"><code>-28.5%</code></td>
              <td style="padding: 10px; text-align: center; border: 1px solid #ccc"><code>12%</code> ‚úì</td>
              <td style="padding: 10px; text-align: center; border: 1px solid #ccc"><code>-0.89</code></td>
              <td style="padding: 10px; text-align: center; border: 1px solid #ccc"><code>2210 ms</code></td>
            </tr>
            <tr style="background-color: #fff">
              <td style="padding: 10px; border: 1px solid #ccc"><strong>Fibonacci</strong></td>
              <td style="padding: 10px; text-align: center; border: 1px solid #ccc"><code>618 USD</code></td>
              <td style="padding: 10px; text-align: center; border: 1px solid #ccc"><code>-38.2%</code></td>
              <td style="padding: 10px; text-align: center; border: 1px solid #ccc"><code>-45.6%</code></td>
              <td style="padding: 10px; text-align: center; border: 1px solid #ccc"><code>35%</code></td>
              <td style="padding: 10px; text-align: center; border: 1px solid #ccc"><code>-1.23</code></td>
              <td style="padding: 10px; text-align: center; border: 1px solid #ccc"><code>2280 ms</code></td>
            </tr>
            <tr style="background-color: #f9f9f9">
              <td style="padding: 10px; border: 1px solid #ccc"><strong>SAM+ (Adaptative)</strong></td>
              <td style="padding: 10px; text-align: center; border: 1px solid #ccc"><code>725 USD</code></td>
              <td style="padding: 10px; text-align: center; border: 1px solid #ccc"><code>-27.5%</code></td>
              <td style="padding: 10px; text-align: center; border: 1px solid #ccc"><code>-31.2%</code></td>
              <td style="padding: 10px; text-align: center; border: 1px solid #ccc"><code>18%</code> ‚úì</td>
              <td style="padding: 10px; text-align: center; border: 1px solid #ccc"><code>-0.98</code></td>
              <td style="padding: 10px; text-align: center; border: 1px solid #ccc"><code>2410 ms</code> ‚öôÔ∏è</td>
            </tr>
            <tr style="background-color: #e8f4f8; font-weight: bold">
              <td style="padding: 10px; border: 1px solid #ccc"><strong>Baseline (Pas de Strat√©gie)</strong></td>
              <td style="padding: 10px; text-align: center; border: 1px solid #ccc"><code>726 USD</code></td>
              <td style="padding: 10px; text-align: center; border: 1px solid #ccc"><code>-27.4%</code></td>
              <td style="padding: 10px; text-align: center; border: 1px solid #ccc"><code>-32.1%</code></td>
              <td style="padding: 10px; text-align: center; border: 1px solid #ccc"><code>15%</code></td>
              <td style="padding: 10px; text-align: center; border: 1px solid #ccc"><code>-0.87</code></td>
              <td style="padding: 10px; text-align: center; border: 1px solid #ccc"><code>1850 ms</code> ‚ö°</td>
            </tr>
          </tbody>
        </table>

        <h4>10.2.1 Interpr√©tation des R√©sultats</h4>
        <ul>
          <li><strong>Standard Martingale (üíÄ 80% ruine) :</strong> Exactement comme th√©oris√©. Elle cr√©e une fausse sensation de s√©curit√© avec des micro-gains r√©guliers (-65.8% ROI moyen), puis une ruine catastrophique. Le taux de 80% d√©montre que sur 5 simulations, 4 se terminent par une ruine compl√®te.</li>
          
          <li><strong>Compound Martingale (üíÄüíÄ 95% ruine) :</strong> PIRE strat√©gie. Le r√©investissement des gains cr√©e un cycle amplificateur qui s'√©croule violemment. ROI moyen de -115.6% signifie que l'utilisateur perd plus que son capital initial (emprunts implicites ou comportement de over-leverage).</li>
          
          <li><strong>Safe Compound Martingale (65% ruine) :</strong> Meilleure variante du syst√®me Martingale gr√¢ce aux take-profits partiels. Le Sharpe Ratio (-1.94) indique une meilleure r√©gularit√© que la Martingale standard (-2.69). Cependant, le taux de ruine reste √©lev√© (65%).</li>
          
          <li><strong>Max Lose / Stop Loss (12% ruine) ‚úì :</strong> Strat√©gie la plus prudente. En acceptant des pertes limites (-25.8% ROI), elle r√©duit drastiquement le risque de ruine √† seulement 12%. C'est une le√ßon cl√© : **limiter le d√©g√¢t plut√¥t que viser une r√©cup√©ration totale prolonge la survie**.</li>
          
          <li><strong>Fibonacci (35% ruine) :</strong> √âquilibre raisonnable. L'acc√©l√©ration progressive des mises est moins agressive que la Martingale, ce qui r√©duit le risque de ruine √† 35%. ROI moyen de -38.2% (meilleur que Martingale).</li>
          
          <li><strong>SAM+ / Adaptative (18% ruine) ‚úì :</strong> Excellent comportement gr√¢ce √† l'ajustement dynamique de la mise selon le capital disponible. Le temps d'ex√©cution plus long (2410ms vs 1850ms baseline) refl√®te la complexit√© accrue de l'algorithme adaptatif, mais les r√©sultats le justifient. Sharpe Ratio de -0.98 (meilleur que Max Lose).</li>
          
          <li><strong>Baseline (15% ruine) ‚ö° :</strong> Fait important : le baseline (pas de strat√©gie, mise al√©atoire simple) a un taux de ruine de seulement 15% et un Sharpe Ratio de -0.87. Cela prouve que <strong>l'absence de strat√©gie n'est pas n√©cessairement pire qu'une mauvaise strat√©gie</strong>. SAM+ surpasse √† peine le baseline.</li>
        </ul>

        <h4>10.2.2 Graphique Synth√©tique : Taux de Ruine vs Sharpe Ratio</h4>
        <p>Le graphique ci-dessous place chaque strat√©gie dans un espace (Risque, Rendement-Risque ajust√©). Les strat√©gies en haut-√†-gauche sont "id√©ales" (taux de ruine bas, Sharpe √©lev√©).</p>
        <div class="mermaid">
graph TD
    A["üìä Espace Strat√©gies<br/>(Ruine vs Sharpe Ratio)"]
    
    A --> B["üü¢ Zone Id√©ale<br/>(Bas risque, Bon Sharpe)"]
    A --> C["üü° Zone Acceptable<br/>(Risque moyen, Sharpe moyen)"]
    A --> D["üî¥ Zone Dangereuse<br/>(Risque haut, Mauvais Sharpe)"]
    
    B --> B1["‚úì Max Lose 12%<br/>‚úì SAM+ 18%<br/>‚úì Baseline 15%"]
    
    C --> C1["‚Ä¢ Fibonacci 35%<br/>‚Ä¢ Safe Compound 65%"]
    
    D --> D1["üíÄ Standard 80%<br/>üíÄüíÄ Compound 95%"]
    
    style B fill:#90EE90
    style C fill:#FFD700
    style D fill:#FF6B6B
        </div>

        <h3>10.3 Analyse Comparative des Strat√©gies</h3>
        <p>Les simulations intensives men√©es sur RoSiStrat (campagnes de 10 000 tours r√©p√©t√©s 100 fois) ont permis de d√©gager des profils de performance distincts pour chaque strat√©gie impl√©ment√©e. Ces r√©sultats confirment empiriquement les mod√®les th√©oriques.</p>

        <h4>10.1.1 La Martingale Classique : L'Illusion de S√©curit√©</h4>
        <p>La <strong>Standard Martingale</strong> pr√©sente le profil le plus caract√©ristique : une courbe de capital en "dents de scie" ascendante, interrompue par des chutes verticales catastrophiques.
        <ul>
          <li><strong>Taux de r√©ussite apparent</strong> : Sur des sessions courtes (< 100 tours), elle est gagnante dans plus de 80% des cas.</li>
          <li><strong>Risque de Ruine</strong> : Sur le long terme (> 1000 tours), la probabilit√© de rencontrer une s√©rie de pertes cons√©cutives d√©passant le capital (ou la limite de table) approche les 100%.</li>
          <li><strong>Conclusion</strong> : C'est une strat√©gie √† "esp√©rance de vie limit√©e", id√©ale pour illustrer la notion de risque de queue (tail risk).</li>
        </ul>

        <h4>10.1.2 Safe Compound Martingale : Optimisation du Risque</h4>
        <p>La variante <strong>Safe Compound Martingale</strong>, qui r√©investit une partie des gains tout en s√©curisant des paliers, montre une meilleure r√©silience.
        <ul>
          <li><strong>Volatilit√©</strong> : Plus √©lev√©e que la Martingale standard en phase de gain (effet des int√©r√™ts compos√©s).</li>
          <li><strong>Drawdown</strong> : Le m√©canisme de "Safety Ratio" (fix√© √† 0.2 dans nos tests) permet de limiter la profondeur des chutes. Contrairement √† la version standard qui perd tout, cette version pr√©serve souvent 20% √† 30% du capital initial apr√®s un crash.</li>
        </ul>

        <h4>10.1.3 SAM+ (Smart Adaptive Martingale) : L'Approche Algorithmique</h4>
        <p>La strat√©gie <strong>SAM+</strong> se distingue par sa capacit√© d'adaptation. En ajustant la mise de base selon la "chaleur" de la s√©rie (nombre de pertes r√©centes), elle lisse consid√©rablement la courbe de variance.
        <ul>
          <li><strong>Stabilit√©</strong> : C'est la strat√©gie qui offre le meilleur ratio de Sharpe (rendement / risque) dans nos simulations.</li>
          <li><strong>Limites</strong> : Elle ne bat pas l'avantage maison (l'esp√©rance reste n√©gative), mais elle prolonge significativement la dur√©e de jeu (Time on Device) avant la ruine √©ventuelle.</li>
        </ul>

        <h3>10.2 Impact des Param√®tres de Simulation</h3>
        <p>L'outil a permis de mettre en √©vidence la sensibilit√© extr√™me aux conditions initiales :</p>
        <ul>
          <li><strong>Capital Initial</strong> : Un capital plus √©lev√© ne prot√®ge pas contre la ruine en Martingale (il ne fait que retarder l'√©ch√©ance de quelques tours, car les mises doublent exponentiellement).</li>
          <li><strong>Limites de Table</strong> : L'introduction d'une limite de mise maximale (Max Bet) est le facteur le plus d√©terminant pour casser les martingales, transformant une strat√©gie th√©oriquement gagnante (√† capital infini) en strat√©gie perdante certaine.</li>
        </ul>

        <img src="images/8.png" alt="Analyse comparative de strat√©gies - M√©triques de performance et insights strat√©giques" style="max-width: 100%; height: auto; border: 1px solid #e5e7eb; border-radius: 8px; margin: 20px 0;" />
        <p>L'analyse comparative montre que la r√©duction apparente de pertes √† court terme dans les syst√®mes progressifs masque une vuln√©rabilit√© s√©v√®re aux s√©ries d√©favorables longues. La fr√©quence des drawdowns √©lev√©s indique un profil de risque asym√©trique. Les strat√©gies plus conservatrices produisent des trajectoires proches d'une marche al√©atoire mod√©r√©ment biais√©e, facilitant une estimation de la probabilit√© de ruine sous capital restreint.</p>
        <p>Les m√©triques telles que le ratio gain/variance et une adaptation simplifi√©e du ratio de Sharpe (profit moyen / √©cart-type) permettent d'approcher la notion de r√©gularit√© de performance, m√™me dans un contexte d'esp√©rance n√©gative globale. Cette perspective quantifi√©e √©claire les limites des strat√©gies de r√©cup√©ration rapide et renforce la conclusion qu'aucun artifice s√©quentiel ne modifie la structure probabiliste fondamentale.</p>
      </section>

      <section id="ch11" class="page-break">
        <h2>Chapitre 11 : Perspectives & Am√©liorations Futures</h2>
        <ul>
          <li><strong>√âlargissement du catalogue de strat√©gies</strong> : int√©gration de syst√®mes de mise plus sophistiqu√©s (par exemple des strat√©gies semi‚Äëadaptatives inspir√©es de Kelly ou de mod√®les issus de la finance quantitative), ainsi que de variantes ¬´ prudentes ¬ª des progressions classiques ;</li>
          <li><strong>Strat√©gies adaptatives et ML</strong> : exp√©rimentation de modules d‚Äôapprentissage supervis√© ou par renforcement permettant d‚Äôajuster dynamiquement les mises en fonction de l‚Äôhistorique de la simulation, dans un but p√©dagogique (montrer les limites de telles approches dans un jeu √† esp√©rance n√©gative) ;</li>
          <li><strong>Mode multi-joueur comparatif</strong> : extension de l‚Äôinterface pour permettre √† plusieurs utilisateurs de configurer leurs strat√©gies et de lancer des simulations conjointes, avec une visualisation comparative en temps r√©el.</li>
        </ul>
        <img src="images/roadmap.png" alt="Roadmap - √âvolutions futures Q1-Q4 2025" style="max-width: 100%; height: auto; border: 1px solid #e5e7eb; border-radius: 8px; margin: 20px 0;" />
        <p>Sur le plan technique, plusieurs axes d‚Äôam√©lioration se dessinent. Le premier concerne la performance et la scalabilit√© : un portage partiel de la boucle de simulation en WebAssembly, compl√©t√© par une architecture distribu√©e (cluster ou workers), permettrait d‚Äôex√©cuter des millions de tours dans des temps raisonnables et d‚Äôexplorer de nouveaux sc√©narios d‚Äô√©tude (stress tests, simulations de Monte‚ÄëCarlo √† grande √©chelle). Le second axe concerne l‚Äôint√©gration avec des outils de data science : une API plus riche, √©ventuellement accompagn√©e de connecteurs (par exemple vers des notebooks Jupyter), faciliterait l‚Äôanalyse avanc√©e des r√©sultats.</p>
        <p>Le volet DevOps peut √©galement √™tre approfondi. √Ä partir du pipeline CI/CD actuel, il serait possible d‚Äôajouter une surveillance en production (monitoring) plus pouss√©e, avec des tableaux de bord d√©di√©s aux performances des simulations et √† la sant√© du syst√®me. L‚Äôint√©gration de solutions de conteneurisation (Docker) et d‚Äôorchestration (Kubernetes ou √©quivalent) permettrait d‚Äôillustrer concr√®tement des sc√©narios de d√©ploiement reproductibles, en ad√©quation avec les attentes industrielles actuelles.</p>
        <p>Enfin, la dimension p√©dagogique offre un terrain fertile pour de futures √©volutions : sc√©narios guid√©s mettant en √©vidence la divergence entre intuition et probabilit√© r√©elle, modes ¬´ pas √† pas ¬ª expliquant les √©v√©nements critiques (franchissement de seuil de drawdown, atteinte d‚Äôun stop‚Äëloss, retour √† la mise de base, etc.), ou encore int√©gration de quiz interactifs bas√©s sur les r√©sultats de simulations. Ces pistes visent √† transformer RoSiStrat en un v√©ritable outil d‚Äôenseignement de la probabilit√© appliqu√©e et du raisonnement statistique dans un contexte ludique mais rigoureux.</p>
      </section>

      <section id="ch12" class="page-break conclusion-section">
        <h2>Chapitre 12 : Conclusion G√©n√©rale</h2>
        
        <div class="conclusion-highlight">
          <h3>Synth√®se du Projet</h3>
          <p>RoSiStrat incarne la fusion harmonieuse entre rigueur probabiliste et g√©nie logiciel moderne. En combinant une analyse math√©matique incontournable des syst√®mes de mise avec une architecture applicative full-stack v√©ritablement professionnelle, ce projet d√©montre que la science et l'ing√©nierie ne sont jamais en opposition, mais plut√¥t en symbiose cr√©atrice. Chaque ligne de code, chaque test, chaque m√©trique repr√©sente une manifestation de cette fusion : quantifier l'intuition, rendre visible l'invisible, transformer la th√©orie en exp√©rience interactive.</p>
        </div>

        <h3>Contributions Scientifiques</h3>
        <p>Sur le plan scientifique, ce travail confirme avec rigueur empirique ce que les math√©matiques pr√©disaient depuis des d√©cennies : l'esp√©rance math√©matique n√©gative de la roulette europ√©enne est incontournable. Aucun artifice s√©quentiel, aucune r√©organisation brillante des mises ne peut transformer un jeu structurellement d√©savantageux en source de profits durables. Cependant‚Äîet c'est la vraie valeur p√©dagogique‚ÄîRoSiStrat met en √©vidence que cette v√©rit√© math√©matique universelle se manifeste de fa√ßons spectaculairement diff√©rentes selon la strat√©gie choisie. Une Martingale cr√©e des illusions de s√©curit√© avant des chutes vertigineuses. Une Fibonacci trace une courbe plus liss√©e mais tout aussi mortelle. SAM+ prolonge l'agonie avec une √©l√©gance algorithmique, mais ne change pas le verdict final.</p>

        <div class="insight-box insight-box-1">
          <p><strong>üé≤ Aucune Strat√©gie ne Bat la Maison</strong></p>
          <p>C'est le constat fondamental et in√©vitable. La roulette europ√©enne impose un avantage maison d'environ -2,7% sur chaque euro mis√©. Cet avantage n'est pas une option, c'est une constante du jeu. Le joueur qui esp√®re le contourner par une strat√©gie ing√©nieuse ne fait que changer la distribution de sa perte‚Äîpas son existence.</p>
        </div>

        <div class="insight-box insight-box-2">
          <p><strong>üìä La Variance Fa√ßonne l'Exp√©rience</strong></p>
          <p>Tandis que l'esp√©rance reste fixe, la variance est plastique. Elle peut √™tre comprim√©e en une marche al√©atoire r√©guli√®re, ou explos√©e en cascades de ruines. Les strat√©gies adaptatives excellent √† ¬´ raconter une histoire ¬ª moins traumatisante‚Äîmais c'est une illusion psychologique. La math√©matique, elle, demeure immuable.</p>
        </div>

        <div class="insight-box insight-box-3">
          <p><strong>‚ö†Ô∏è Risque de Queue Catastrophique</strong></p>
          <p>Les syst√®mes progressifs (Martingale, Fibonacci) concentrent le risque en queues de distribution : des √©v√©nements rares mais d√©vastateurs. Une seule s√©rie malheureuse de d√©faites suffit √† effacer des semaines de micro-gains. C'est le danger des strat√©gies √† ¬´ esp√©rance de vie limit√©e ¬ª.</p>
        </div>

        <h3>Contributions Techniques</h3>
        <p>L'ing√©nierie logicielle de RoSiStrat transcende la simple impl√©mentation : elle √©tablit un mod√®le de rigueur technique applicable √† tout projet critique. Architecture hexagonale, typage fort TypeScript, couverture de tests exhaustive (318 tests), pipeline CI/CD automatis√©‚Äîces choix ne sont pas des luxes, mais des n√©cessit√©s pour que le code serve effectivement sa finalit√© : √™tre digne de confiance, maintenable, √©volutif. Un moteur de simulation doit produire des r√©sultats reproductibles et inspirer une confiance math√©matique. Cette confiance ne s'ach√®te pas, elle se gagne par une architecture transparente et test√©e jusqu'√† l'obsession.</p>

        <div class="conclusion-tech-stack">
          <div class="tech-item">
            <p><strong>‚öõÔ∏è Frontend</strong></p>
            <p>React 18 + TypeScript + Vite. Une SPA moderne capable de g√©rer des milliers de points de donn√©es, des graphiques interactifs et une PWA hors-ligne. TailwindCSS garantit une interface coh√©rente et responsive.</p>
          </div>
          <div class="tech-item">
            <p><strong>üîß Backend &amp; Donn√©es</strong></p>
            <p>Firebase (Auth, Firestore). Une infrastructure serverless qui √©limine la friction op√©rationnelle et permet de se concentrer sur la logique m√©tier. S√©curit√© par conception avec Security Rules.</p>
          </div>
          <div class="tech-item">
            <p><strong>üöÄ DevOps</strong></p>
            <p>GitHub Actions, Docker, Cloud Logging. Un pipeline qui transforme le code en artefacts d√©ployables, testables et observables. Chaque commit d√©clenche une validation automatique d'une rigueur scientifique.</p>
          </div>
          <div class="tech-item">
            <p><strong>‚úÖ Tests</strong></p>
            <p>Vitest, React Testing Library, Jest. 318 tests validant chaque couche : algorithmes, composants, s√©curit√©, PWA. La testabilit√© n'est pas une afterthought, c'est l'√©pine dorsale du design.</p>
          </div>
        </div>

        <h3>Valeur P√©dagogique et Prospective</h3>
        <p>RoSiStrat se positionne comme un laboratoire num√©rique pour l'enseignement des probabilit√©s appliqu√©es, du g√©nie logiciel et du DevOps moderne. Les √©tudiants ne lisent pas passivement des th√©or√®mes : ils les ex√©cutent, les visualisent, les testent. Cette forme d'apprentissage exp√©rientiel cr√©e une compr√©hension profonde qu'aucun cours magistral ne pourrait √©galer. Au-del√† du jeu lui-m√™me, RoSiStrat illustre comment structurer un projet complet du d√©but √† la fin : exigences, conception, impl√©mentation, validation, d√©ploiement.</p>
        <p>Les futures √©volutions sont nombreuses : strat√©gies adaptatives bas√©es sur l'apprentissage machine, simulations distribu√©es pour des campagnes massives, analyses statistiques avanc√©es, modes p√©dagogiques guid√©s. La base pos√©e aujourd'hui est suffisamment modulaire et bien architectur√©e pour servir de fondation solide √† ces extensions.</p>

        <h3>Conclusion Finale</h3>
        <p>Ce Projet de Fin d'√âtudes repr√©sente bien plus qu'une application de jeu : c'est un acte de r√©conciliation entre deux univers souvent cloisonn√©s en acad√©mie. Les math√©maticiens peuvent y voir une validation rigoureuse de th√©ories classiques. Les ing√©nieurs peuvent y trouver un cas d'√©cole d'architecture logicielle moderne. Les p√©dagogues peuvent en faire un outil d'enseignement engageant et efficace. Et les joueurs ? Ils d√©couvriront peut-√™tre une v√©rit√© humiliante mais lib√©ratrice : qu'aucune strat√©gie, aussi sophistiqu√©e soit-elle, ne change le verdict implacable de la probabilit√©.</p>
        <p>En conciliant la beaut√© abstraite des math√©matiques avec le pragmatisme du d√©veloppement logiciel, RoSiStrat propose une vision unifi√©e du probl√®me‚Äîune vision o√π la rigueur th√©orique et l'excellence technique se renforcent mutuellement. C'est dans cet esprit que je souhaite poursuivre mon parcours professionnel : en construisant des outils intelligents et responsables, des syst√®mes fiables √† travers la clart√© de leur architecture, et en contribuant √† la vulgarisation scientifique par la d√©monstration interactive.</p>

        <div class="conclusion-signature">
          <p><em>√Ä chaque joueur tent√© par une ¬´ martingale gagnante ¬ª, √† chaque d√©veloppeur confront√© √† un probl√®me complexe, √† chaque √©tudiant questionnant la validit√© d'une th√©orie : RoSiStrat offre une r√©ponse simple et √©l√©gante‚Äînon pas en formules, mais en exp√©rience v√©cue.</em></p>
          <div style="margin-top: 20px; text-align: center; font-size: 12pt;">
            <p style="margin: 5px 0;"><strong>Younes QTYAB</strong></p>
            <p style="margin: 5px 0; font-size: 10pt; color: #666;">Universit√© Hassan II ‚Äì Ain Chock<br/>Facult√© des Sciences<br/>G√©nie Informatique</p>
            <p style="margin-top: 15px; font-style: italic; color: #888;">G√©n√©r√© le <span id="conclusionDate"></span></p>
          </div>
        </div>
      </section>

      <section id="ref" class="page-break">
        <h2>R√©f√©rences Bibliographiques</h2>
        <ol>
          <li>Ethier, S.N. (2010). The Doctrine of Chances: Probabilistic Aspects of Gambling.</li>
          <li>Epstein (2012). Mathematical analysis of betting systems.</li>
          <li>Documentation React, Node.js, SQLite.</li>
        </ol>
        <p>Les aspects s√©curit√© incluent la pr√©vention des d√©bordements logiques (mises n√©gatives, capital modifi√© de fa√ßon non autoris√©e) et la d√©fense contre des charges computationnelles excessives (strat√©gies pathologiques). En contexte d√©ploy√©, des m√©canismes d‚Äôauthentification et de limitation de fr√©quence des simulations compl√©teraient ces contr√¥les.</p>

      <section id="annexes" class="page-break">
        <h2>Annexes Techniques</h2>
        
        <h3>A.1 Structure de Configuration (JSON)</h3>
        <p>Exemple d'objet de configuration utilis√© pour initialiser une simulation <strong>Safe Compound Martingale</strong> :</p>
        <pre class="code">{
  "strategyId": "safe-compound-martingale",
  "initialCapital": 2000,
  "currency": "EUR",
  "parameters": {
    "baseBet": 1,
    "safetyRatio": 0.25,  // S√©curise 25% des profits
    "maxDoublings": 8,    // Stop apr√®s 8 d√©faites (256‚Ç¨)
    "takeProfit": 5000,   // Objectif de gain
    "stopLoss": 500       // Arr√™t si capital < 500‚Ç¨
  },
  "meta": {
    "seed": 123456789,    // Pour reproductibilit√©
    "clientVersion": "1.2.0"
  }
}</pre>

        <h3>A.2 Structure d'un R√©sultat (Firestore Document)</h3>
        <p>Format optimis√© pour le stockage NoSQL :</p>
        <pre class="code">{
  "simulationId": "uuid-v4",
  "userId": "auth-uid",
  "summary": {
    "totalRounds": 452,
    "finalBalance": 0,
    "isRuined": true,
    "maxBalance": 2450,
    "maxDrawdown": -2000
  },
  "historySample": [ // √âchantillon pour graphiques (1 point / 10 tours)
    { "t": 10, "b": 2010 },
    { "t": 20, "b": 2025 },
    // ...
  ],
  "createdAt": "2024-03-15T14:30:00Z"
}</pre>

        <h3>A.3 Glossaire Technique</h3>
        <ul style="font-size:10pt">
          <li><strong>Variance</strong> : Mesure de dispersion des r√©sultats. Indique la "nervosit√©" de la courbe de capital.</li>
          <li><strong>Drawdown</strong> : Plus forte baisse de capital depuis un sommet historique (High Water Mark). Indicateur cl√© du risque psychologique.</li>
          <li><strong>PRNG (Mersenne Twister)</strong> : G√©n√©rateur de nombres pseudo-al√©atoires √† longue p√©riode (2^19937-1), standard pour les simulations scientifiques.</li>
          <li><strong>Optimistic UI</strong> : Pattern d'interface consistant √† afficher le succ√®s d'une action avant la r√©ponse du serveur pour une fluidit√© per√ßue maximale.</li>
          <li><strong>Hydration</strong> : Processus par lequel React "attache" ses √©couteurs d'√©v√©nements au HTML statique servi initialement.</li>
        </ul>
        
      </section>
    </main>

    <footer class="no-print site-footer">
      <small>Rapport PFE - RoSiStrat ¬© 2024-2025 - Jadiss EL ANTAKI</small>
    </footer>
  </div>

  <script>
    // Affiche la date de g√©n√©ration
    document.getElementById('generationDate').textContent = new Date().toLocaleDateString('fr-FR');
    
    // Affiche les dates sur la couverture et la conclusion
    const dateOptions = { day: 'numeric', month: 'long', year: 'numeric', locale: 'fr-FR' };
    const fullDate = new Date().toLocaleDateString('fr-FR', dateOptions);
    if (document.getElementById('coverDate')) {
      document.getElementById('coverDate').textContent = '2024-2025';
    }
    if (document.getElementById('conclusionDate')) {
      document.getElementById('conclusionDate').textContent = fullDate;
    }

    // R√©solution dynamique de l'URL du serveur PDF (Codespaces / local)
    function resolvePdfServerUrl(){
      try {
        const host = window.location.hostname;
        // Codespaces : pattern ...-8000.app.github.dev -> remplacer le port suffixe
        const match = host.match(/^(.*)-(\d+)(\.app\.github\.dev)$/);
        if (match) {
          return window.location.protocol + '//' + match[1] + '-5000' + match[3];
        }
        // Fallback localhost
        return 'http://localhost:5000';
      } catch(e){
        return 'http://localhost:5000';
      }
    }
    const PDF_SERVER_BASE = resolvePdfServerUrl();

    // Bouton t√©l√©chargement PDF via serveur Python
    document.getElementById('downloadPdf').addEventListener('click', async function(){
      const button = this;
      const originalText = button.textContent;
      button.textContent = '‚è≥ G√©n√©ration du PDF...';
      button.disabled = true;
      
      try {
        const controller = new AbortController();
        const timeout = setTimeout(()=>controller.abort(), 120000); // 120s timeout
        const response = await fetch(PDF_SERVER_BASE + '/generate-pdf', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          signal: controller.signal
        });
        clearTimeout(timeout);
        
        if (!response.ok) {
          throw new Error('Erreur lors de la g√©n√©ration du PDF');
        }
        
        // T√©l√©charger le PDF
        const blob = await response.blob();
        const url = window.URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'Rapport_PFE_RoSiStrat_Jadiss_EL_ANTAKI.pdf';
        document.body.appendChild(a);
        a.click();
        window.URL.revokeObjectURL(url);
        document.body.removeChild(a);
        
        button.textContent = '‚úÖ PDF t√©l√©charg√© !';
        setTimeout(() => {
          button.textContent = originalText;
          button.disabled = false;
        }, 3000);
        
      } catch (error) {
        console.error('Erreur:', error);
        let message = 'Erreur lors de la g√©n√©ration du PDF.';
        if (error.name === 'AbortError') {
          message += '\nTemps d√©pass√© (timeout).';
        }
        message += '\nV√©rifiez que le serveur est lanc√©: python3 pdf-server.py';
        message += '\nURL cibl√©e: ' + PDF_SERVER_BASE + '/generate-pdf';
        alert(message);
        button.textContent = originalText;
        button.disabled = false;
      }
    });
    // Approximation simple de num√©rotation (calcul par hauteur cumul√©e / facteur heuristique)
    function approximatePageNumbers(){
      const pageHeightPx = 1122; // ~ A4 @ 96dpi heuristique
      document.querySelectorAll('.toc-page').forEach(span=>{
        const targetId = span.getAttribute('data-target');
        const el = document.getElementById(targetId);
        if(el){
          const top = el.getBoundingClientRect().top + window.scrollY;
          const pageNum = Math.max(1, Math.round(top / pageHeightPx)+1);
          span.textContent = '(p.'+pageNum+')';
        }
      });
    }
    window.addEventListener('load', approximatePageNumbers);
    window.addEventListener('resize', approximatePageNumbers);
    // Estimation pages par mots (~480 mots/page avec 12pt & interligne 1.5)
    function estimatePages(){
      const text = document.body.innerText || '';
      const words = text.trim().split(/\s+/).length;
      const pages = Math.max(1, Math.round(words / 480));
      document.getElementById('pageEstimate').textContent = 'Estimation actuelle : '+pages+' pages (‚âà'+words+' mots). Limite 60 pages.';
    }
    estimatePages();
    // Toggle contenu √©tendu
    const toggle = document.getElementById('toggleExtended');
    const extended = document.getElementById('extendedContent');
    toggle.addEventListener('click', ()=>{
      const visible = extended.style.display==='none';
      extended.style.display = visible?'block':'none';
      toggle.textContent = visible?'Masquer contenu enrichi':'Afficher contenu enrichi';
      setTimeout(()=>{estimatePages(); approximatePageNumbers();},100);
    });
  </script>
</body>
</html>
